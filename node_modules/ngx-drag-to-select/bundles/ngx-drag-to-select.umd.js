(function (global, factory) {
    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('@angular/core'), require('@angular/common'), require('rxjs/operators'), require('rxjs')) :
    typeof define === 'function' && define.amd ? define('ngx-drag-to-select', ['exports', '@angular/core', '@angular/common', 'rxjs/operators', 'rxjs'], factory) :
    (factory((global['ngx-drag-to-select'] = {}),global.ng.core,global.ng.common,global.rxjs.operators,global.rxjs));
}(this, (function (exports,core,common,operators,rxjs) { 'use strict';

    /*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */
    function __values(o) {
        var m = typeof Symbol === "function" && o[Symbol.iterator], i = 0;
        if (m)
            return m.call(o);
        return {
            next: function () {
                if (o && i >= o.length)
                    o = void 0;
                return { value: o && o[i++], done: !o };
            }
        };
    }
    function __read(o, n) {
        var m = typeof Symbol === "function" && o[Symbol.iterator];
        if (!m)
            return o;
        var i = m.call(o), r, ar = [], e;
        try {
            while ((n === void 0 || n-- > 0) && !(r = i.next()).done)
                ar.push(r.value);
        }
        catch (error) {
            e = { error: error };
        }
        finally {
            try {
                if (r && !r.done && (m = i["return"]))
                    m.call(i);
            }
            finally {
                if (e)
                    throw e.error;
            }
        }
        return ar;
    }
    function __spread() {
        for (var ar = [], i = 0; i < arguments.length; i++)
            ar = ar.concat(__read(arguments[i]));
        return ar;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,missingReturn,uselessCode} checked by tsc
     */
    /** @type {?} */
    var CONFIG = new core.InjectionToken('DRAG_TO_SELECT_CONFIG');
    /** @type {?} */
    var USER_CONFIG = new core.InjectionToken('USER_CONFIG');

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,missingReturn,uselessCode} checked by tsc
     */
    /** @type {?} */
    var AUDIT_TIME = 16;
    /** @type {?} */
    var MIN_WIDTH = 5;
    /** @type {?} */
    var MIN_HEIGHT = 5;
    /** @type {?} */
    var NO_SELECT_CLASS = 'dts-no-select';

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,missingReturn,uselessCode} checked by tsc
     */
    /** @type {?} */
    var isObject = function (item) {
        return item && typeof item === 'object' && !Array.isArray(item) && item !== null;
    };
    /**
     * @param {?} target
     * @param {?} source
     * @return {?}
     */
    function mergeDeep(target, source) {
        if (isObject(target) && isObject(source)) {
            Object.keys(source).forEach(function (key) {
                var _a, _b;
                if (isObject(source[key])) {
                    if (!target[key]) {
                        Object.assign(target, (_a = {}, _a[key] = {}, _a));
                    }
                    mergeDeep(target[key], source[key]);
                }
                else {
                    Object.assign(target, (_b = {}, _b[key] = source[key], _b));
                }
            });
        }
        return target;
    }
    /** @type {?} */
    var hasMinimumSize = function (selectBox, minWidth, minHeight) {
        if (minWidth === void 0) {
            minWidth = MIN_WIDTH;
        }
        if (minHeight === void 0) {
            minHeight = MIN_HEIGHT;
        }
        return selectBox.width > minWidth || selectBox.height > minHeight;
    };
    /** @type {?} */
    var clearSelection = function (window) {
        /** @type {?} */
        var selection = window.getSelection();
        if (selection.removeAllRanges) {
            selection.removeAllRanges();
        }
        else if (selection.empty) {
            selection.empty();
        }
    };
    /** @type {?} */
    var inBoundingBox = function (point, box) {
        return (box.left <= point.x && point.x <= box.left + box.width && box.top <= point.y && point.y <= box.top + box.height);
    };
    /** @type {?} */
    var boxIntersects = function (boxA, boxB) {
        return (boxA.left <= boxB.left + boxB.width &&
            boxA.left + boxA.width >= boxB.left &&
            boxA.top <= boxB.top + boxB.height &&
            boxA.top + boxA.height >= boxB.top);
    };
    /** @type {?} */
    var calculateBoundingClientRect = function (element) {
        return element.getBoundingClientRect();
    };
    /** @type {?} */
    var getMousePosition = function (event) {
        return {
            x: event.clientX,
            y: event.clientY
        };
    };
    /** @type {?} */
    var getScroll = function () {
        if (!document || !document.documentElement) {
            return {
                x: 0,
                y: 0
            };
        }
        return {
            x: document.documentElement.scrollLeft || document.body.scrollLeft,
            y: document.documentElement.scrollTop || document.body.scrollTop
        };
    };
    /** @type {?} */
    var getRelativeMousePosition = function (event, container) {
        var _a = getMousePosition(event), clientX = _a.x, clientY = _a.y;
        /** @type {?} */
        var scroll = getScroll();
        /** @type {?} */
        var borderSize = (container.boundingClientRect.width - container.clientWidth) / 2;
        /** @type {?} */
        var offsetLeft = container.boundingClientRect.left + scroll.x;
        /** @type {?} */
        var offsetTop = container.boundingClientRect.top + scroll.y;
        return {
            x: clientX - borderSize - (offsetLeft - window.pageXOffset) + container.scrollLeft,
            y: clientY - borderSize - (offsetTop - window.pageYOffset) + container.scrollTop
        };
    };
    /** @type {?} */
    var cursorWithinElement = function (event, element) {
        /** @type {?} */
        var mousePoint = getMousePosition(event);
        return inBoundingBox(mousePoint, calculateBoundingClientRect(element));
    };

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,missingReturn,uselessCode} checked by tsc
     */
    var SelectItemDirective = /** @class */ (function () {
        function SelectItemDirective(config, platformId, host, renderer) {
            this.config = config;
            this.platformId = platformId;
            this.host = host;
            this.renderer = renderer;
            this.selected = false;
        }
        Object.defineProperty(SelectItemDirective.prototype, "value", {
            get: /**
             * @return {?}
             */ function () {
                return this.dtsSelectItem ? this.dtsSelectItem : this;
            },
            enumerable: true,
            configurable: true
        });
        /**
         * @return {?}
         */
        SelectItemDirective.prototype.ngOnInit = /**
         * @return {?}
         */
            function () {
                if (common.isPlatformBrowser(this.platformId)) {
                    this.calculateBoundingClientRect();
                }
            };
        /**
         * @return {?}
         */
        SelectItemDirective.prototype.ngDoCheck = /**
         * @return {?}
         */
            function () {
                this.applySelectedClass();
            };
        /**
         * @return {?}
         */
        SelectItemDirective.prototype.getBoundingClientRect = /**
         * @return {?}
         */
            function () {
                return this._boundingClientRect;
            };
        /**
         * @return {?}
         */
        SelectItemDirective.prototype.calculateBoundingClientRect = /**
         * @return {?}
         */
            function () {
                this._boundingClientRect = calculateBoundingClientRect(this.host.nativeElement);
            };
        /**
         * @return {?}
         */
        SelectItemDirective.prototype._select = /**
         * @return {?}
         */
            function () {
                this.selected = true;
            };
        /**
         * @return {?}
         */
        SelectItemDirective.prototype._deselect = /**
         * @return {?}
         */
            function () {
                this.selected = false;
            };
        /**
         * @return {?}
         */
        SelectItemDirective.prototype.applySelectedClass = /**
         * @return {?}
         */
            function () {
                if (this.selected) {
                    this.renderer.addClass(this.host.nativeElement, this.config.selectedClass);
                }
                else {
                    this.renderer.removeClass(this.host.nativeElement, this.config.selectedClass);
                }
            };
        SelectItemDirective.decorators = [
            { type: core.Directive, args: [{
                        selector: '[dtsSelectItem]',
                        exportAs: 'dtsSelectItem',
                        host: {
                            class: 'dts-select-item'
                        }
                    },] }
        ];
        /** @nocollapse */
        SelectItemDirective.ctorParameters = function () {
            return [
                { type: undefined, decorators: [{ type: core.Inject, args: [CONFIG,] }] },
                { type: undefined, decorators: [{ type: core.Inject, args: [core.PLATFORM_ID,] }] },
                { type: core.ElementRef },
                { type: core.Renderer2 }
            ];
        };
        SelectItemDirective.propDecorators = {
            dtsSelectItem: [{ type: core.Input }]
        };
        return SelectItemDirective;
    }());

    var _a;
    /** @type {?} */
    var SUPPORTED_KEYS = {
        alt: true,
        shift: true,
        meta: true,
        ctrl: true
    };
    /** @type {?} */
    var META_KEY = 'meta';
    /** @type {?} */
    var KEY_ALIASES = (_a = {},
        _a[META_KEY] = ['ctrl', 'meta'],
        _a);
    /** @type {?} */
    var SUPPORTED_SHORTCUTS = {
        disableSelection: true,
        toggleSingleItem: true,
        addToSelection: true,
        removeFromSelection: true
    };
    /** @type {?} */
    var ERROR_PREFIX = '[ShortcutService]';
    var ShortcutService = /** @class */ (function () {
        function ShortcutService(config) {
            this.config = config;
            this._shortcuts = {};
            this._shortcuts = this.createShortcutsFromConfig(config.shortcuts);
        }
        /**
         * @param {?} event
         * @return {?}
         */
        ShortcutService.prototype.disableSelection = /**
         * @param {?} event
         * @return {?}
         */
            function (event) {
                return this.isShortcutPressed('disableSelection', event);
            };
        /**
         * @param {?} event
         * @return {?}
         */
        ShortcutService.prototype.toggleSingleItem = /**
         * @param {?} event
         * @return {?}
         */
            function (event) {
                return this.isShortcutPressed('toggleSingleItem', event);
            };
        /**
         * @param {?} event
         * @return {?}
         */
        ShortcutService.prototype.addToSelection = /**
         * @param {?} event
         * @return {?}
         */
            function (event) {
                return this.isShortcutPressed('addToSelection', event);
            };
        /**
         * @param {?} event
         * @return {?}
         */
        ShortcutService.prototype.removeFromSelection = /**
         * @param {?} event
         * @return {?}
         */
            function (event) {
                return this.isShortcutPressed('removeFromSelection', event);
            };
        /**
         * @param {?} event
         * @return {?}
         */
        ShortcutService.prototype.extendedSelectionShortcut = /**
         * @param {?} event
         * @return {?}
         */
            function (event) {
                return this.addToSelection(event) || this.removeFromSelection(event);
            };
        /**
         * @param {?} shortcuts
         * @return {?}
         */
        ShortcutService.prototype.createShortcutsFromConfig = /**
         * @param {?} shortcuts
         * @return {?}
         */
            function (shortcuts) {
                var _this = this;
                var e_1, _a;
                /** @type {?} */
                var shortcutMap = {};
                var _loop_1 = function (key, shortcutsForCommand) {
                    if (!this_1.isSupportedShortcut(key)) {
                        throw new Error(this_1.getErrorMessage("Shortcut " + key + " not supported"));
                    }
                    shortcutsForCommand
                        .replace(/ /g, '')
                        .split(',')
                        .forEach(function (shortcut) {
                        if (!shortcutMap[key]) {
                            shortcutMap[key] = [];
                        }
                        /** @type {?} */
                        var combo = shortcut.split('+');
                        /** @type {?} */
                        var cleanCombos = _this.substituteKey(shortcut, combo, META_KEY);
                        cleanCombos.forEach(function (cleanCombo) {
                            /** @type {?} */
                            var unsupportedKey = _this.isSupportedCombo(cleanCombo);
                            if (unsupportedKey) {
                                throw new Error(_this.getErrorMessage("Key '" + unsupportedKey + "' in shortcut " + shortcut + " not supported"));
                            }
                            shortcutMap[key].push(cleanCombo.map(function (comboKey) { return comboKey + "Key"; }));
                        });
                    });
                };
                var this_1 = this;
                try {
                    for (var _b = __values(Object.entries(shortcuts)), _c = _b.next(); !_c.done; _c = _b.next()) {
                        var _d = __read(_c.value, 2), key = _d[0], shortcutsForCommand = _d[1];
                        _loop_1(key, shortcutsForCommand);
                    }
                }
                catch (e_1_1) {
                    e_1 = { error: e_1_1 };
                }
                finally {
                    try {
                        if (_c && !_c.done && (_a = _b.return))
                            _a.call(_b);
                    }
                    finally {
                        if (e_1)
                            throw e_1.error;
                    }
                }
                return shortcutMap;
            };
        /**
         * @param {?} shortcut
         * @param {?} combo
         * @param {?} substituteKey
         * @return {?}
         */
        ShortcutService.prototype.substituteKey = /**
         * @param {?} shortcut
         * @param {?} combo
         * @param {?} substituteKey
         * @return {?}
         */
            function (shortcut, combo, substituteKey) {
                /** @type {?} */
                var hasSpecialKey = shortcut.includes(substituteKey);
                /** @type {?} */
                var substitutedShortcut = [];
                if (hasSpecialKey) {
                    /** @type {?} */
                    var cleanShortcut_1 = combo.filter(function (element) { return element !== META_KEY; });
                    KEY_ALIASES.meta.forEach(function (alias) {
                        substitutedShortcut.push(__spread(cleanShortcut_1, [alias]));
                    });
                }
                else {
                    substitutedShortcut.push(combo);
                }
                return substitutedShortcut;
            };
        /**
         * @param {?} message
         * @return {?}
         */
        ShortcutService.prototype.getErrorMessage = /**
         * @param {?} message
         * @return {?}
         */
            function (message) {
                return ERROR_PREFIX + " " + message;
            };
        /**
         * @param {?} shortcutName
         * @param {?} event
         * @return {?}
         */
        ShortcutService.prototype.isShortcutPressed = /**
         * @param {?} shortcutName
         * @param {?} event
         * @return {?}
         */
            function (shortcutName, event) {
                /** @type {?} */
                var shortcuts = this._shortcuts[shortcutName];
                return shortcuts.some(function (shortcut) {
                    return shortcut.every(function (key) { return event[key]; });
                });
            };
        /**
         * @param {?} combo
         * @return {?}
         */
        ShortcutService.prototype.isSupportedCombo = /**
         * @param {?} combo
         * @return {?}
         */
            function (combo) {
                /** @type {?} */
                var unsupportedKey = null;
                combo.forEach(function (key) {
                    if (!SUPPORTED_KEYS[key]) {
                        unsupportedKey = key;
                        return;
                    }
                });
                return unsupportedKey;
            };
        /**
         * @param {?} shortcut
         * @return {?}
         */
        ShortcutService.prototype.isSupportedShortcut = /**
         * @param {?} shortcut
         * @return {?}
         */
            function (shortcut) {
                return SUPPORTED_SHORTCUTS[shortcut];
            };
        ShortcutService.decorators = [
            { type: core.Injectable }
        ];
        /** @nocollapse */
        ShortcutService.ctorParameters = function () {
            return [
                { type: undefined, decorators: [{ type: core.Inject, args: [CONFIG,] }] }
            ];
        };
        return ShortcutService;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,missingReturn,uselessCode} checked by tsc
     */
    /** @type {?} */
    var createSelectBox = function (container) {
        return function (source) {
            return source.pipe(operators.map(function (_a) {
                var _b = __read(_a, 3), event = _b[0], opacity = _b[1], _c = _b[2], x = _c.x, y = _c.y;
                // Type annotation is required here, because `getRelativeMousePosition` returns a `MousePosition`,
                // the TS compiler cannot figure out the shape of this type.
                /** @type {?} */
                var mousePosition = getRelativeMousePosition(event, container);
                /** @type {?} */
                var width = opacity > 0 ? mousePosition.x - x : 0;
                /** @type {?} */
                var height = opacity > 0 ? mousePosition.y - y : 0;
                return {
                    top: height < 0 ? mousePosition.y : y,
                    left: width < 0 ? mousePosition.x : x,
                    width: Math.abs(width),
                    height: Math.abs(height),
                    opacity: opacity
                };
            }));
        };
    };
    /** @type {?} */
    var whenSelectBoxVisible = function (selectBox$) {
        return function (source) {
            return source.pipe(operators.withLatestFrom(selectBox$), operators.filter(function (_a) {
                var _b = __read(_a, 2), selectBox = _b[1];
                return hasMinimumSize(selectBox, 0, 0);
            }), operators.map(function (_a) {
                var _b = __read(_a, 2), event = _b[0], _ = _b[1];
                return event;
            }));
        };
    };
    /** @type {?} */
    var distinctKeyEvents = function () {
        return function (source) {
            return source.pipe(operators.distinctUntilChanged(function (prev, curr) {
                return prev.keyCode === curr.keyCode;
            }));
        };
    };

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,missingReturn,uselessCode} checked by tsc
     */
    /** @enum {number} */
    var UpdateActions = {
        Add: 0,
        Remove: 1,
    };
    UpdateActions[UpdateActions.Add] = 'Add';
    UpdateActions[UpdateActions.Remove] = 'Remove';
    /** @enum {number} */
    var Action = {
        Add: 0,
        Delete: 1,
        None: 2,
    };
    Action[Action.Add] = 'Add';
    Action[Action.Delete] = 'Delete';
    Action[Action.None] = 'None';

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,missingReturn,uselessCode} checked by tsc
     */
    var SelectContainerComponent = /** @class */ (function () {
        function SelectContainerComponent(platformId, shortcuts, hostElementRef, renderer, ngZone) {
            this.platformId = platformId;
            this.shortcuts = shortcuts;
            this.hostElementRef = hostElementRef;
            this.renderer = renderer;
            this.ngZone = ngZone;
            this.selectOnDrag = true;
            this.disabled = false;
            this.disableDrag = false;
            this.selectMode = false;
            this.selectWithShortcut = false;
            this.custom = false;
            this.selectedItemsChange = new core.EventEmitter();
            this.select = new core.EventEmitter();
            this.itemSelected = new core.EventEmitter();
            this.itemDeselected = new core.EventEmitter();
            this.selectionStarted = new core.EventEmitter();
            this.selectionEnded = new core.EventEmitter();
            this._tmpItems = new Map();
            this._selectedItems$ = new rxjs.BehaviorSubject([]);
            this.updateItems$ = new rxjs.Subject();
            this.destroy$ = new rxjs.Subject();
        }
        /**
         * @return {?}
         */
        SelectContainerComponent.prototype.ngAfterViewInit = /**
         * @return {?}
         */
            function () {
                var _this = this;
                if (common.isPlatformBrowser(this.platformId)) {
                    this.host = this.hostElementRef.nativeElement;
                    this._initSelectedItemsChange();
                    this._calculateBoundingClientRect();
                    this._observeBoundingRectChanges();
                    this._observeSelectableItems();
                    // distinctKeyEvents is used to prevent multiple key events to be fired repeatedly
                    // on Windows when a key is being pressed
                    /** @type {?} */
                    var keydown$ = rxjs.fromEvent(window, 'keydown').pipe(distinctKeyEvents(), operators.share());
                    /** @type {?} */
                    var keyup$ = rxjs.fromEvent(window, 'keyup').pipe(distinctKeyEvents(), operators.share());
                    /** @type {?} */
                    var mouseup$_1 = rxjs.fromEvent(window, 'mouseup').pipe(operators.filter(function () { return !_this.disabled; }), operators.tap(function () { return _this._onMouseUp(); }), operators.share());
                    /** @type {?} */
                    var mousemove$_1 = rxjs.fromEvent(window, 'mousemove').pipe(operators.filter(function () { return !_this.disabled; }), operators.share());
                    /** @type {?} */
                    var mousedown$ = rxjs.fromEvent(this.host, 'mousedown').pipe(operators.filter(function (event) { return event.button === 0; }), // only emit left mouse
                    operators.filter(function () { return !_this.disabled; }), operators.tap(function (event) { return _this._onMouseDown(event); }), operators.share());
                    /** @type {?} */
                    var dragging$ = mousedown$.pipe(operators.filter(function (event) { return !_this.shortcuts.disableSelection(event); }), operators.filter(function () { return !_this.selectMode; }), operators.filter(function () { return !_this.disableDrag; }), operators.switchMap(function () { return mousemove$_1.pipe(operators.takeUntil(mouseup$_1)); }), operators.share());
                    /** @type {?} */
                    var currentMousePosition$ = mousedown$.pipe(operators.map(function (event) { return getRelativeMousePosition(event, _this.host); }));
                    /** @type {?} */
                    var show$ = dragging$.pipe(operators.mapTo(1));
                    /** @type {?} */
                    var hide$ = mouseup$_1.pipe(operators.mapTo(0));
                    /** @type {?} */
                    var opacity$ = rxjs.merge(show$, hide$).pipe(operators.distinctUntilChanged());
                    /** @type {?} */
                    var selectBox$ = rxjs.combineLatest(dragging$, opacity$, currentMousePosition$).pipe(createSelectBox(this.host), operators.share());
                    this.selectBoxClasses$ = rxjs.merge(dragging$, mouseup$_1, keydown$, keyup$).pipe(operators.auditTime(AUDIT_TIME), operators.withLatestFrom(selectBox$), operators.map(function (_a) {
                        var _b = __read(_a, 2), event = _b[0], selectBox = _b[1];
                        return {
                            'dts-adding': hasMinimumSize(selectBox, 0, 0) && !_this.shortcuts.removeFromSelection(event),
                            'dts-removing': _this.shortcuts.removeFromSelection(event)
                        };
                    }), operators.distinctUntilChanged(function (a, b) { return JSON.stringify(a) === JSON.stringify(b); }));
                    /** @type {?} */
                    var selectOnMouseUp$ = dragging$.pipe(operators.filter(function () { return !_this.selectOnDrag; }), operators.filter(function () { return !_this.selectMode; }), operators.filter(function (event) { return _this._cursorWithinHost(event); }), operators.switchMap(function (_) { return mouseup$_1.pipe(operators.first()); }), operators.filter(function (event) {
                        return (!_this.shortcuts.disableSelection(event) && !_this.shortcuts.toggleSingleItem(event)) ||
                            _this.shortcuts.removeFromSelection(event);
                    }));
                    /** @type {?} */
                    var selectOnDrag$ = selectBox$.pipe(operators.auditTime(AUDIT_TIME), operators.withLatestFrom(mousemove$_1, function (selectBox, event) {
                        return ({
                            selectBox: selectBox,
                            event: event
                        });
                    }), operators.filter(function () { return _this.selectOnDrag; }), operators.filter(function (_a) {
                        var selectBox = _a.selectBox;
                        return hasMinimumSize(selectBox);
                    }), operators.map(function (_a) {
                        var event = _a.event;
                        return event;
                    }));
                    /** @type {?} */
                    var selectOnKeyboardEvent$ = rxjs.merge(keydown$, keyup$).pipe(operators.auditTime(AUDIT_TIME), whenSelectBoxVisible(selectBox$), operators.tap(function (event) {
                        if (_this._isExtendedSelection(event)) {
                            _this._tmpItems.clear();
                        }
                        else {
                            _this._flushItems();
                        }
                    }));
                    rxjs.merge(selectOnMouseUp$, selectOnDrag$, selectOnKeyboardEvent$)
                        .pipe(operators.takeUntil(this.destroy$))
                        .subscribe(function (event) { return _this._selectItems(event); });
                    this.selectBoxStyles$ = selectBox$.pipe(operators.map(function (selectBox) {
                        return ({
                            top: selectBox.top + "px",
                            left: selectBox.left + "px",
                            width: selectBox.width + "px",
                            height: selectBox.height + "px",
                            opacity: selectBox.opacity
                        });
                    }));
                    this._initSelectionOutputs(mousedown$, mouseup$_1);
                }
            };
        /**
         * @return {?}
         */
        SelectContainerComponent.prototype.selectAll = /**
         * @return {?}
         */
            function () {
                var _this = this;
                this.$selectableItems.forEach(function (item) {
                    _this._selectItem(item);
                });
            };
        /**
         * @template T
         * @param {?} predicate
         * @return {?}
         */
        SelectContainerComponent.prototype.toggleItems = /**
         * @template T
         * @param {?} predicate
         * @return {?}
         */
            function (predicate) {
                var _this = this;
                this._filterSelectableItems(predicate).subscribe(function (item) { return _this._toggleItem(item); });
            };
        /**
         * @template T
         * @param {?} predicate
         * @return {?}
         */
        SelectContainerComponent.prototype.selectItems = /**
         * @template T
         * @param {?} predicate
         * @return {?}
         */
            function (predicate) {
                var _this = this;
                this._filterSelectableItems(predicate).subscribe(function (item) { return _this._selectItem(item); });
            };
        /**
         * @template T
         * @param {?} predicate
         * @return {?}
         */
        SelectContainerComponent.prototype.deselectItems = /**
         * @template T
         * @param {?} predicate
         * @return {?}
         */
            function (predicate) {
                var _this = this;
                this._filterSelectableItems(predicate).subscribe(function (item) { return _this._deselectItem(item); });
            };
        /**
         * @return {?}
         */
        SelectContainerComponent.prototype.clearSelection = /**
         * @return {?}
         */
            function () {
                var _this = this;
                this.$selectableItems.forEach(function (item) {
                    _this._deselectItem(item);
                });
            };
        /**
         * @return {?}
         */
        SelectContainerComponent.prototype.update = /**
         * @return {?}
         */
            function () {
                this._calculateBoundingClientRect();
                this.$selectableItems.forEach(function (item) { return item.calculateBoundingClientRect(); });
            };
        /**
         * @return {?}
         */
        SelectContainerComponent.prototype.ngOnDestroy = /**
         * @return {?}
         */
            function () {
                this.destroy$.next();
                this.destroy$.complete();
            };
        /**
         * @template T
         * @param {?} predicate
         * @return {?}
         */
        SelectContainerComponent.prototype._filterSelectableItems = /**
         * @template T
         * @param {?} predicate
         * @return {?}
         */
            function (predicate) {
                // Wrap select items in an observable for better efficiency as
                // no intermediate arrays are created and we only need to process
                // every item once.
                return rxjs.from(this.$selectableItems.toArray()).pipe(operators.filter(function (item) { return predicate(item.value); }));
            };
        /**
         * @return {?}
         */
        SelectContainerComponent.prototype._initSelectedItemsChange = /**
         * @return {?}
         */
            function () {
                var _this = this;
                this._selectedItems$
                    .pipe(operators.auditTime(AUDIT_TIME), operators.takeUntil(this.destroy$))
                    .subscribe({
                    next: function (selectedItems) {
                        _this.selectedItemsChange.emit(selectedItems);
                        _this.select.emit(selectedItems);
                    },
                    complete: function () {
                        _this.selectedItemsChange.emit([]);
                    }
                });
            };
        /**
         * @return {?}
         */
        SelectContainerComponent.prototype._observeSelectableItems = /**
         * @return {?}
         */
            function () {
                var _this = this;
                // Listen for updates and either select or deselect an item
                this.updateItems$
                    .pipe(operators.withLatestFrom(this._selectedItems$), operators.takeUntil(this.destroy$))
                    .subscribe(function (_a) {
                    var _b = __read(_a, 2), update = _b[0], selectedItems = _b[1];
                    /** @type {?} */
                    var item = update.item;
                    switch (update.type) {
                        case UpdateActions.Add:
                            if (_this._addItem(item, selectedItems)) {
                                item._select();
                            }
                            break;
                        case UpdateActions.Remove:
                            if (_this._removeItem(item, selectedItems)) {
                                item._deselect();
                            }
                            break;
                    }
                });
                // Update the container as well as all selectable items if the list has changed
                this.$selectableItems.changes
                    .pipe(operators.withLatestFrom(this._selectedItems$), operators.observeOn(rxjs.asyncScheduler), operators.takeUntil(this.destroy$))
                    .subscribe(function (_a) {
                    var _b = __read(_a, 2), items = _b[0], selectedItems = _b[1];
                    /** @type {?} */
                    var newList = items.toArray();
                    /** @type {?} */
                    var removedItems = selectedItems.filter(function (item) { return !newList.includes(item.value); });
                    if (removedItems.length) {
                        removedItems.forEach(function (item) { return _this._removeItem(item, selectedItems); });
                    }
                    _this.update();
                });
            };
        /**
         * @return {?}
         */
        SelectContainerComponent.prototype._observeBoundingRectChanges = /**
         * @return {?}
         */
            function () {
                var _this = this;
                this.ngZone.runOutsideAngular(function () {
                    /** @type {?} */
                    var resize$ = rxjs.fromEvent(window, 'resize');
                    /** @type {?} */
                    var windowScroll$ = rxjs.fromEvent(window, 'scroll');
                    /** @type {?} */
                    var containerScroll$ = rxjs.fromEvent(_this.host, 'scroll');
                    rxjs.merge(resize$, windowScroll$, containerScroll$)
                        .pipe(operators.startWith('INITIAL_UPDATE'), operators.auditTime(AUDIT_TIME), operators.takeUntil(_this.destroy$))
                        .subscribe(function () {
                        _this.update();
                    });
                });
            };
        /**
         * @param {?} mousedown$
         * @param {?} mouseup$
         * @return {?}
         */
        SelectContainerComponent.prototype._initSelectionOutputs = /**
         * @param {?} mousedown$
         * @param {?} mouseup$
         * @return {?}
         */
            function (mousedown$, mouseup$) {
                var _this = this;
                mousedown$
                    .pipe(operators.filter(function (event) { return _this._cursorWithinHost(event); }), operators.tap(function () { return _this.selectionStarted.emit(); }), operators.concatMapTo(mouseup$.pipe(operators.first())), operators.withLatestFrom(this._selectedItems$), operators.map(function (_a) {
                    var _b = __read(_a, 2), items = _b[1];
                    return items;
                }), operators.takeUntil(this.destroy$))
                    .subscribe(function (items) {
                    _this.selectionEnded.emit(items);
                });
            };
        /**
         * @return {?}
         */
        SelectContainerComponent.prototype._calculateBoundingClientRect = /**
         * @return {?}
         */
            function () {
                this.host.boundingClientRect = calculateBoundingClientRect(this.host);
            };
        /**
         * @param {?} event
         * @return {?}
         */
        SelectContainerComponent.prototype._cursorWithinHost = /**
         * @param {?} event
         * @return {?}
         */
            function (event) {
                return cursorWithinElement(event, this.host);
            };
        /**
         * @return {?}
         */
        SelectContainerComponent.prototype._onMouseUp = /**
         * @return {?}
         */
            function () {
                this._flushItems();
                this.renderer.removeClass(document.body, NO_SELECT_CLASS);
            };
        /**
         * @param {?} event
         * @return {?}
         */
        SelectContainerComponent.prototype._onMouseDown = /**
         * @param {?} event
         * @return {?}
         */
            function (event) {
                var _this = this;
                if (this.shortcuts.disableSelection(event) || this.disabled) {
                    return;
                }
                clearSelection(window);
                if (!this.disableDrag) {
                    this.renderer.addClass(document.body, NO_SELECT_CLASS);
                }
                /** @type {?} */
                var mousePoint = getMousePosition(event);
                this.$selectableItems.forEach(function (item, index) {
                    /** @type {?} */
                    var itemRect = item.getBoundingClientRect();
                    /** @type {?} */
                    var withinBoundingBox = inBoundingBox(mousePoint, itemRect);
                    if (_this.shortcuts.extendedSelectionShortcut(event)) {
                        return;
                    }
                    /** @type {?} */
                    var shouldAdd = (withinBoundingBox &&
                        !_this.shortcuts.toggleSingleItem(event) &&
                        !_this.selectMode &&
                        !_this.selectWithShortcut) ||
                        (withinBoundingBox && _this.shortcuts.toggleSingleItem(event) && !item.selected) ||
                        (!withinBoundingBox && _this.shortcuts.toggleSingleItem(event) && item.selected) ||
                        (withinBoundingBox && !item.selected && _this.selectMode) ||
                        (!withinBoundingBox && item.selected && _this.selectMode);
                    /** @type {?} */
                    var shouldRemove = (!withinBoundingBox &&
                        !_this.shortcuts.toggleSingleItem(event) &&
                        !_this.selectMode &&
                        !_this.selectWithShortcut) ||
                        (!withinBoundingBox && _this.shortcuts.toggleSingleItem(event) && !item.selected) ||
                        (withinBoundingBox && _this.shortcuts.toggleSingleItem(event) && item.selected) ||
                        (!withinBoundingBox && !item.selected && _this.selectMode) ||
                        (withinBoundingBox && item.selected && _this.selectMode);
                    if (shouldAdd) {
                        _this._selectItem(item);
                    }
                    else if (shouldRemove) {
                        _this._deselectItem(item);
                    }
                });
            };
        /**
         * @param {?} event
         * @return {?}
         */
        SelectContainerComponent.prototype._selectItems = /**
         * @param {?} event
         * @return {?}
         */
            function (event) {
                var _this = this;
                /** @type {?} */
                var selectionBox = calculateBoundingClientRect(this.$selectBox.nativeElement);
                this.$selectableItems.forEach(function (item) {
                    if (_this._isExtendedSelection(event)) {
                        _this._extendedSelectionMode(selectionBox, item, event);
                    }
                    else {
                        _this._normalSelectionMode(selectionBox, item, event);
                    }
                });
            };
        /**
         * @param {?} event
         * @return {?}
         */
        SelectContainerComponent.prototype._isExtendedSelection = /**
         * @param {?} event
         * @return {?}
         */
            function (event) {
                return this.shortcuts.extendedSelectionShortcut(event) && this.selectOnDrag;
            };
        /**
         * @param {?} selectBox
         * @param {?} item
         * @param {?} event
         * @return {?}
         */
        SelectContainerComponent.prototype._normalSelectionMode = /**
         * @param {?} selectBox
         * @param {?} item
         * @param {?} event
         * @return {?}
         */
            function (selectBox, item, event) {
                /** @type {?} */
                var inSelection = boxIntersects(selectBox, item.getBoundingClientRect());
                /** @type {?} */
                var shouldAdd = inSelection && !item.selected && !this.shortcuts.removeFromSelection(event);
                /** @type {?} */
                var shouldRemove = (!inSelection && item.selected && !this.shortcuts.addToSelection(event)) ||
                    (inSelection && item.selected && this.shortcuts.removeFromSelection(event));
                if (shouldAdd) {
                    this._selectItem(item);
                }
                else if (shouldRemove) {
                    this._deselectItem(item);
                }
            };
        /**
         * @param {?} selectBox
         * @param {?} item
         * @param {?} event
         * @return {?}
         */
        SelectContainerComponent.prototype._extendedSelectionMode = /**
         * @param {?} selectBox
         * @param {?} item
         * @param {?} event
         * @return {?}
         */
            function (selectBox, item, event) {
                /** @type {?} */
                var inSelection = boxIntersects(selectBox, item.getBoundingClientRect());
                /** @type {?} */
                var shoudlAdd = (inSelection && !item.selected && !this.shortcuts.removeFromSelection(event) && !this._tmpItems.has(item)) ||
                    (inSelection && item.selected && this.shortcuts.removeFromSelection(event) && !this._tmpItems.has(item));
                /** @type {?} */
                var shouldRemove = (!inSelection && item.selected && this.shortcuts.addToSelection(event) && this._tmpItems.has(item)) ||
                    (!inSelection && !item.selected && this.shortcuts.removeFromSelection(event) && this._tmpItems.has(item));
                if (shoudlAdd) {
                    item.selected ? item._deselect() : item._select();
                    /** @type {?} */
                    var action = this.shortcuts.removeFromSelection(event)
                        ? Action.Delete
                        : this.shortcuts.addToSelection(event)
                            ? Action.Add
                            : Action.None;
                    this._tmpItems.set(item, action);
                }
                else if (shouldRemove) {
                    this.shortcuts.removeFromSelection(event) ? item._select() : item._deselect();
                    this._tmpItems.delete(item);
                }
            };
        /**
         * @return {?}
         */
        SelectContainerComponent.prototype._flushItems = /**
         * @return {?}
         */
            function () {
                var _this = this;
                this._tmpItems.forEach(function (action, item) {
                    if (action === Action.Add) {
                        _this._selectItem(item);
                    }
                    if (action === Action.Delete) {
                        _this._deselectItem(item);
                    }
                });
                this._tmpItems.clear();
            };
        /**
         * @param {?} item
         * @param {?} selectedItems
         * @return {?}
         */
        SelectContainerComponent.prototype._addItem = /**
         * @param {?} item
         * @param {?} selectedItems
         * @return {?}
         */
            function (item, selectedItems) {
                /** @type {?} */
                var success = false;
                if (!this._hasItem(item, selectedItems)) {
                    success = true;
                    selectedItems.push(item.value);
                    this._selectedItems$.next(selectedItems);
                    this.itemSelected.emit(item.value);
                }
                return success;
            };
        /**
         * @param {?} item
         * @param {?} selectedItems
         * @return {?}
         */
        SelectContainerComponent.prototype._removeItem = /**
         * @param {?} item
         * @param {?} selectedItems
         * @return {?}
         */
            function (item, selectedItems) {
                /** @type {?} */
                var success = false;
                /** @type {?} */
                var value = item instanceof SelectItemDirective ? item.value : item;
                /** @type {?} */
                var index = selectedItems.indexOf(value);
                if (index > -1) {
                    success = true;
                    selectedItems.splice(index, 1);
                    this._selectedItems$.next(selectedItems);
                    this.itemDeselected.emit(item.value);
                }
                return success;
            };
        /**
         * @param {?} item
         * @return {?}
         */
        SelectContainerComponent.prototype._toggleItem = /**
         * @param {?} item
         * @return {?}
         */
            function (item) {
                if (item.selected) {
                    this._deselectItem(item);
                }
                else {
                    this._selectItem(item);
                }
            };
        /**
         * @param {?} item
         * @return {?}
         */
        SelectContainerComponent.prototype._selectItem = /**
         * @param {?} item
         * @return {?}
         */
            function (item) {
                this.updateItems$.next({ type: UpdateActions.Add, item: item });
            };
        /**
         * @param {?} item
         * @return {?}
         */
        SelectContainerComponent.prototype._deselectItem = /**
         * @param {?} item
         * @return {?}
         */
            function (item) {
                this.updateItems$.next({ type: UpdateActions.Remove, item: item });
            };
        /**
         * @param {?} item
         * @param {?} selectedItems
         * @return {?}
         */
        SelectContainerComponent.prototype._hasItem = /**
         * @param {?} item
         * @param {?} selectedItems
         * @return {?}
         */
            function (item, selectedItems) {
                return selectedItems.includes(item.value);
            };
        SelectContainerComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'dts-select-container',
                        exportAs: 'dts-select-container',
                        host: {
                            class: 'dts-select-container'
                        },
                        template: "\n    <ng-content></ng-content>\n    <div\n      class=\"dts-select-box\"\n      #selectBox\n      [ngClass]=\"selectBoxClasses$ | async\"\n      [ngStyle]=\"selectBoxStyles$ | async\"\n    ></div>\n  ",
                        styles: [":host{display:block;position:relative}"]
                    }] }
        ];
        /** @nocollapse */
        SelectContainerComponent.ctorParameters = function () {
            return [
                { type: undefined, decorators: [{ type: core.Inject, args: [core.PLATFORM_ID,] }] },
                { type: ShortcutService },
                { type: core.ElementRef },
                { type: core.Renderer2 },
                { type: core.NgZone }
            ];
        };
        SelectContainerComponent.propDecorators = {
            $selectBox: [{ type: core.ViewChild, args: ['selectBox',] }],
            $selectableItems: [{ type: core.ContentChildren, args: [SelectItemDirective, { descendants: true },] }],
            selectedItems: [{ type: core.Input }],
            selectOnDrag: [{ type: core.Input }],
            disabled: [{ type: core.Input }],
            disableDrag: [{ type: core.Input }],
            selectMode: [{ type: core.Input }],
            selectWithShortcut: [{ type: core.Input }],
            custom: [{ type: core.Input }, { type: core.HostBinding, args: ['class.dts-custom',] }],
            selectedItemsChange: [{ type: core.Output }],
            select: [{ type: core.Output }],
            itemSelected: [{ type: core.Output }],
            itemDeselected: [{ type: core.Output }],
            selectionStarted: [{ type: core.Output }],
            selectionEnded: [{ type: core.Output }]
        };
        return SelectContainerComponent;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,missingReturn,uselessCode} checked by tsc
     */
    /** @type {?} */
    var DEFAULT_CONFIG = {
        selectedClass: 'selected',
        shortcuts: {
            disableSelection: 'alt',
            toggleSingleItem: 'meta',
            addToSelection: 'shift',
            removeFromSelection: 'shift+meta'
        }
    };

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,missingReturn,uselessCode} checked by tsc
     */
    /** @type {?} */
    var COMPONENTS = [SelectContainerComponent, SelectItemDirective];
    /**
     * @param {?} config
     * @return {?}
     */
    function CONFIG_FACTORY(config) {
        return mergeDeep(DEFAULT_CONFIG, config);
    }
    var DragToSelectModule = /** @class */ (function () {
        function DragToSelectModule() {
        }
        /**
         * @param {?=} config
         * @return {?}
         */
        DragToSelectModule.forRoot = /**
         * @param {?=} config
         * @return {?}
         */
            function (config) {
                if (config === void 0) {
                    config = {};
                }
                return {
                    ngModule: DragToSelectModule,
                    providers: [
                        ShortcutService,
                        { provide: USER_CONFIG, useValue: config },
                        {
                            provide: CONFIG,
                            useFactory: CONFIG_FACTORY,
                            deps: [USER_CONFIG]
                        }
                    ]
                };
            };
        DragToSelectModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [common.CommonModule],
                        declarations: __spread(COMPONENTS),
                        exports: __spread(COMPONENTS)
                    },] }
        ];
        return DragToSelectModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,missingReturn,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,missingReturn,uselessCode} checked by tsc
     */

    exports.CONFIG_FACTORY = CONFIG_FACTORY;
    exports.DragToSelectModule = DragToSelectModule;
    exports.SelectContainerComponent = SelectContainerComponent;
    exports.SelectItemDirective = SelectItemDirective;
    exports.b = DEFAULT_CONFIG;
    exports.f = ShortcutService;
    exports.c = CONFIG;
    exports.d = USER_CONFIG;
    exports.a = mergeDeep;

    Object.defineProperty(exports, '__esModule', { value: true });

})));

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmd4LWRyYWctdG8tc2VsZWN0LnVtZC5qcy5tYXAiLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy90c2xpYi90c2xpYi5lczYuanMiLCJuZzovL25neC1kcmFnLXRvLXNlbGVjdC9saWIvdG9rZW5zLnRzIiwibmc6Ly9uZ3gtZHJhZy10by1zZWxlY3QvbGliL2NvbnN0YW50cy50cyIsIm5nOi8vbmd4LWRyYWctdG8tc2VsZWN0L2xpYi91dGlscy50cyIsIm5nOi8vbmd4LWRyYWctdG8tc2VsZWN0L2xpYi9zZWxlY3QtaXRlbS5kaXJlY3RpdmUudHMiLCJuZzovL25neC1kcmFnLXRvLXNlbGVjdC9saWIvc2hvcnRjdXQuc2VydmljZS50cyIsIm5nOi8vbmd4LWRyYWctdG8tc2VsZWN0L2xpYi9vcGVyYXRvcnMudHMiLCJuZzovL25neC1kcmFnLXRvLXNlbGVjdC9saWIvbW9kZWxzLnRzIiwibmc6Ly9uZ3gtZHJhZy10by1zZWxlY3QvbGliL3NlbGVjdC1jb250YWluZXIuY29tcG9uZW50LnRzIiwibmc6Ly9uZ3gtZHJhZy10by1zZWxlY3QvbGliL2NvbmZpZy50cyIsIm5nOi8vbmd4LWRyYWctdG8tc2VsZWN0L2xpYi9kcmFnLXRvLXNlbGVjdC5tb2R1bGUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyohICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbkNvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxyXG5MaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2VcclxudGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGVcclxuTGljZW5zZSBhdCBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuXHJcblRISVMgQ09ERSBJUyBQUk9WSURFRCBPTiBBTiAqQVMgSVMqIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcclxuS0lORCwgRUlUSEVSIEVYUFJFU1MgT1IgSU1QTElFRCwgSU5DTFVESU5HIFdJVEhPVVQgTElNSVRBVElPTiBBTlkgSU1QTElFRFxyXG5XQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgVElUTEUsIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLFxyXG5NRVJDSEFOVEFCTElUWSBPUiBOT04tSU5GUklOR0VNRU5ULlxyXG5cclxuU2VlIHRoZSBBcGFjaGUgVmVyc2lvbiAyLjAgTGljZW5zZSBmb3Igc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zXHJcbmFuZCBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogKi9cclxuLyogZ2xvYmFsIFJlZmxlY3QsIFByb21pc2UgKi9cclxuXHJcbnZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24oZCwgYikge1xyXG4gICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxyXG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcclxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcclxuICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG59O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZXh0ZW5kcyhkLCBiKSB7XHJcbiAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XHJcbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XHJcbn1cclxuXHJcbmV4cG9ydCB2YXIgX19hc3NpZ24gPSBmdW5jdGlvbigpIHtcclxuICAgIF9fYXNzaWduID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiBfX2Fzc2lnbih0KSB7XHJcbiAgICAgICAgZm9yICh2YXIgcywgaSA9IDEsIG4gPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XHJcbiAgICAgICAgICAgIHMgPSBhcmd1bWVudHNbaV07XHJcbiAgICAgICAgICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSkgdFtwXSA9IHNbcF07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIF9fYXNzaWduLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3Jlc3QocywgZSkge1xyXG4gICAgdmFyIHQgPSB7fTtcclxuICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSAmJiBlLmluZGV4T2YocCkgPCAwKVxyXG4gICAgICAgIHRbcF0gPSBzW3BdO1xyXG4gICAgaWYgKHMgIT0gbnVsbCAmJiB0eXBlb2YgT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyA9PT0gXCJmdW5jdGlvblwiKVxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBwID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhzKTsgaSA8IHAubGVuZ3RoOyBpKyspIGlmIChlLmluZGV4T2YocFtpXSkgPCAwKVxyXG4gICAgICAgICAgICB0W3BbaV1dID0gc1twW2ldXTtcclxuICAgIHJldHVybiB0O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykge1xyXG4gICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcclxuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XHJcbiAgICBlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByO1xyXG4gICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcGFyYW0ocGFyYW1JbmRleCwgZGVjb3JhdG9yKSB7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKHRhcmdldCwga2V5KSB7IGRlY29yYXRvcih0YXJnZXQsIGtleSwgcGFyYW1JbmRleCk7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fbWV0YWRhdGEobWV0YWRhdGFLZXksIG1ldGFkYXRhVmFsdWUpIHtcclxuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5tZXRhZGF0YSA9PT0gXCJmdW5jdGlvblwiKSByZXR1cm4gUmVmbGVjdC5tZXRhZGF0YShtZXRhZGF0YUtleSwgbWV0YWRhdGFWYWx1ZSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2F3YWl0ZXIodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XHJcbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XHJcbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XHJcbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHJlc3VsdC52YWx1ZSk7IH0pLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cclxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZ2VuZXJhdG9yKHRoaXNBcmcsIGJvZHkpIHtcclxuICAgIHZhciBfID0geyBsYWJlbDogMCwgc2VudDogZnVuY3Rpb24oKSB7IGlmICh0WzBdICYgMSkgdGhyb3cgdFsxXTsgcmV0dXJuIHRbMV07IH0sIHRyeXM6IFtdLCBvcHM6IFtdIH0sIGYsIHksIHQsIGc7XHJcbiAgICByZXR1cm4gZyA9IHsgbmV4dDogdmVyYigwKSwgXCJ0aHJvd1wiOiB2ZXJiKDEpLCBcInJldHVyblwiOiB2ZXJiKDIpIH0sIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiAoZ1tTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzOyB9KSwgZztcclxuICAgIGZ1bmN0aW9uIHZlcmIobikgeyByZXR1cm4gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIHN0ZXAoW24sIHZdKTsgfTsgfVxyXG4gICAgZnVuY3Rpb24gc3RlcChvcCkge1xyXG4gICAgICAgIGlmIChmKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiR2VuZXJhdG9yIGlzIGFscmVhZHkgZXhlY3V0aW5nLlwiKTtcclxuICAgICAgICB3aGlsZSAoXykgdHJ5IHtcclxuICAgICAgICAgICAgaWYgKGYgPSAxLCB5ICYmICh0ID0gb3BbMF0gJiAyID8geVtcInJldHVyblwiXSA6IG9wWzBdID8geVtcInRocm93XCJdIHx8ICgodCA9IHlbXCJyZXR1cm5cIl0pICYmIHQuY2FsbCh5KSwgMCkgOiB5Lm5leHQpICYmICEodCA9IHQuY2FsbCh5LCBvcFsxXSkpLmRvbmUpIHJldHVybiB0O1xyXG4gICAgICAgICAgICBpZiAoeSA9IDAsIHQpIG9wID0gW29wWzBdICYgMiwgdC52YWx1ZV07XHJcbiAgICAgICAgICAgIHN3aXRjaCAob3BbMF0pIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgMDogY2FzZSAxOiB0ID0gb3A7IGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA0OiBfLmxhYmVsKys7IHJldHVybiB7IHZhbHVlOiBvcFsxXSwgZG9uZTogZmFsc2UgfTtcclxuICAgICAgICAgICAgICAgIGNhc2UgNTogXy5sYWJlbCsrOyB5ID0gb3BbMV07IG9wID0gWzBdOyBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIGNhc2UgNzogb3AgPSBfLm9wcy5wb3AoKTsgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEodCA9IF8udHJ5cywgdCA9IHQubGVuZ3RoID4gMCAmJiB0W3QubGVuZ3RoIC0gMV0pICYmIChvcFswXSA9PT0gNiB8fCBvcFswXSA9PT0gMikpIHsgXyA9IDA7IGNvbnRpbnVlOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSAzICYmICghdCB8fCAob3BbMV0gPiB0WzBdICYmIG9wWzFdIDwgdFszXSkpKSB7IF8ubGFiZWwgPSBvcFsxXTsgYnJlYWs7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDYgJiYgXy5sYWJlbCA8IHRbMV0pIHsgXy5sYWJlbCA9IHRbMV07IHQgPSBvcDsgYnJlYWs7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAodCAmJiBfLmxhYmVsIDwgdFsyXSkgeyBfLmxhYmVsID0gdFsyXTsgXy5vcHMucHVzaChvcCk7IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRbMl0pIF8ub3BzLnBvcCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIF8udHJ5cy5wb3AoKTsgY29udGludWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgb3AgPSBib2R5LmNhbGwodGhpc0FyZywgXyk7XHJcbiAgICAgICAgfSBjYXRjaCAoZSkgeyBvcCA9IFs2LCBlXTsgeSA9IDA7IH0gZmluYWxseSB7IGYgPSB0ID0gMDsgfVxyXG4gICAgICAgIGlmIChvcFswXSAmIDUpIHRocm93IG9wWzFdOyByZXR1cm4geyB2YWx1ZTogb3BbMF0gPyBvcFsxXSA6IHZvaWQgMCwgZG9uZTogdHJ1ZSB9O1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19leHBvcnRTdGFyKG0sIGV4cG9ydHMpIHtcclxuICAgIGZvciAodmFyIHAgaW4gbSkgaWYgKCFleHBvcnRzLmhhc093blByb3BlcnR5KHApKSBleHBvcnRzW3BdID0gbVtwXTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fdmFsdWVzKG8pIHtcclxuICAgIHZhciBtID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9bU3ltYm9sLml0ZXJhdG9yXSwgaSA9IDA7XHJcbiAgICBpZiAobSkgcmV0dXJuIG0uY2FsbChvKTtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAobyAmJiBpID49IG8ubGVuZ3RoKSBvID0gdm9pZCAwO1xyXG4gICAgICAgICAgICByZXR1cm4geyB2YWx1ZTogbyAmJiBvW2krK10sIGRvbmU6ICFvIH07XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcmVhZChvLCBuKSB7XHJcbiAgICB2YXIgbSA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvW1N5bWJvbC5pdGVyYXRvcl07XHJcbiAgICBpZiAoIW0pIHJldHVybiBvO1xyXG4gICAgdmFyIGkgPSBtLmNhbGwobyksIHIsIGFyID0gW10sIGU7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIHdoaWxlICgobiA9PT0gdm9pZCAwIHx8IG4tLSA+IDApICYmICEociA9IGkubmV4dCgpKS5kb25lKSBhci5wdXNoKHIudmFsdWUpO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGVycm9yKSB7IGUgPSB7IGVycm9yOiBlcnJvciB9OyB9XHJcbiAgICBmaW5hbGx5IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBpZiAociAmJiAhci5kb25lICYmIChtID0gaVtcInJldHVyblwiXSkpIG0uY2FsbChpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZmluYWxseSB7IGlmIChlKSB0aHJvdyBlLmVycm9yOyB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gYXI7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3NwcmVhZCgpIHtcclxuICAgIGZvciAodmFyIGFyID0gW10sIGkgPSAwOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKVxyXG4gICAgICAgIGFyID0gYXIuY29uY2F0KF9fcmVhZChhcmd1bWVudHNbaV0pKTtcclxuICAgIHJldHVybiBhcjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXdhaXQodikge1xyXG4gICAgcmV0dXJuIHRoaXMgaW5zdGFuY2VvZiBfX2F3YWl0ID8gKHRoaXMudiA9IHYsIHRoaXMpIDogbmV3IF9fYXdhaXQodik7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2FzeW5jR2VuZXJhdG9yKHRoaXNBcmcsIF9hcmd1bWVudHMsIGdlbmVyYXRvcikge1xyXG4gICAgaWYgKCFTeW1ib2wuYXN5bmNJdGVyYXRvcikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN5bWJvbC5hc3luY0l0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKTtcclxuICAgIHZhciBnID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pLCBpLCBxID0gW107XHJcbiAgICByZXR1cm4gaSA9IHt9LCB2ZXJiKFwibmV4dFwiKSwgdmVyYihcInRocm93XCIpLCB2ZXJiKFwicmV0dXJuXCIpLCBpW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0sIGk7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgaWYgKGdbbl0pIGlbbl0gPSBmdW5jdGlvbiAodikgeyByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKGEsIGIpIHsgcS5wdXNoKFtuLCB2LCBhLCBiXSkgPiAxIHx8IHJlc3VtZShuLCB2KTsgfSk7IH07IH1cclxuICAgIGZ1bmN0aW9uIHJlc3VtZShuLCB2KSB7IHRyeSB7IHN0ZXAoZ1tuXSh2KSk7IH0gY2F0Y2ggKGUpIHsgc2V0dGxlKHFbMF1bM10sIGUpOyB9IH1cclxuICAgIGZ1bmN0aW9uIHN0ZXAocikgeyByLnZhbHVlIGluc3RhbmNlb2YgX19hd2FpdCA/IFByb21pc2UucmVzb2x2ZShyLnZhbHVlLnYpLnRoZW4oZnVsZmlsbCwgcmVqZWN0KSA6IHNldHRsZShxWzBdWzJdLCByKTsgfVxyXG4gICAgZnVuY3Rpb24gZnVsZmlsbCh2YWx1ZSkgeyByZXN1bWUoXCJuZXh0XCIsIHZhbHVlKTsgfVxyXG4gICAgZnVuY3Rpb24gcmVqZWN0KHZhbHVlKSB7IHJlc3VtZShcInRocm93XCIsIHZhbHVlKTsgfVxyXG4gICAgZnVuY3Rpb24gc2V0dGxlKGYsIHYpIHsgaWYgKGYodiksIHEuc2hpZnQoKSwgcS5sZW5ndGgpIHJlc3VtZShxWzBdWzBdLCBxWzBdWzFdKTsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hc3luY0RlbGVnYXRvcihvKSB7XHJcbiAgICB2YXIgaSwgcDtcclxuICAgIHJldHVybiBpID0ge30sIHZlcmIoXCJuZXh0XCIpLCB2ZXJiKFwidGhyb3dcIiwgZnVuY3Rpb24gKGUpIHsgdGhyb3cgZTsgfSksIHZlcmIoXCJyZXR1cm5cIiksIGlbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0sIGk7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4sIGYpIHsgaVtuXSA9IG9bbl0gPyBmdW5jdGlvbiAodikgeyByZXR1cm4gKHAgPSAhcCkgPyB7IHZhbHVlOiBfX2F3YWl0KG9bbl0odikpLCBkb25lOiBuID09PSBcInJldHVyblwiIH0gOiBmID8gZih2KSA6IHY7IH0gOiBmOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2FzeW5jVmFsdWVzKG8pIHtcclxuICAgIGlmICghU3ltYm9sLmFzeW5jSXRlcmF0b3IpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJTeW1ib2wuYXN5bmNJdGVyYXRvciBpcyBub3QgZGVmaW5lZC5cIik7XHJcbiAgICB2YXIgbSA9IG9bU3ltYm9sLmFzeW5jSXRlcmF0b3JdLCBpO1xyXG4gICAgcmV0dXJuIG0gPyBtLmNhbGwobykgOiAobyA9IHR5cGVvZiBfX3ZhbHVlcyA9PT0gXCJmdW5jdGlvblwiID8gX192YWx1ZXMobykgOiBvW1N5bWJvbC5pdGVyYXRvcl0oKSwgaSA9IHt9LCB2ZXJiKFwibmV4dFwiKSwgdmVyYihcInRocm93XCIpLCB2ZXJiKFwicmV0dXJuXCIpLCBpW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0sIGkpO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IGlbbl0gPSBvW25dICYmIGZ1bmN0aW9uICh2KSB7IHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7IHYgPSBvW25dKHYpLCBzZXR0bGUocmVzb2x2ZSwgcmVqZWN0LCB2LmRvbmUsIHYudmFsdWUpOyB9KTsgfTsgfVxyXG4gICAgZnVuY3Rpb24gc2V0dGxlKHJlc29sdmUsIHJlamVjdCwgZCwgdikgeyBQcm9taXNlLnJlc29sdmUodikudGhlbihmdW5jdGlvbih2KSB7IHJlc29sdmUoeyB2YWx1ZTogdiwgZG9uZTogZCB9KTsgfSwgcmVqZWN0KTsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19tYWtlVGVtcGxhdGVPYmplY3QoY29va2VkLCByYXcpIHtcclxuICAgIGlmIChPYmplY3QuZGVmaW5lUHJvcGVydHkpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KGNvb2tlZCwgXCJyYXdcIiwgeyB2YWx1ZTogcmF3IH0pOyB9IGVsc2UgeyBjb29rZWQucmF3ID0gcmF3OyB9XHJcbiAgICByZXR1cm4gY29va2VkO1xyXG59O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9faW1wb3J0U3Rhcihtb2QpIHtcclxuICAgIGlmIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpIHJldHVybiBtb2Q7XHJcbiAgICB2YXIgcmVzdWx0ID0ge307XHJcbiAgICBpZiAobW9kICE9IG51bGwpIGZvciAodmFyIGsgaW4gbW9kKSBpZiAoT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobW9kLCBrKSkgcmVzdWx0W2tdID0gbW9kW2tdO1xyXG4gICAgcmVzdWx0LmRlZmF1bHQgPSBtb2Q7XHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19pbXBvcnREZWZhdWx0KG1vZCkge1xyXG4gICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBkZWZhdWx0OiBtb2QgfTtcclxufVxyXG4iLCJpbXBvcnQgeyBJbmplY3Rpb25Ub2tlbiB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgRHJhZ1RvU2VsZWN0Q29uZmlnIH0gZnJvbSAnLi9tb2RlbHMnO1xuXG5leHBvcnQgY29uc3QgQ09ORklHID0gbmV3IEluamVjdGlvblRva2VuPERyYWdUb1NlbGVjdENvbmZpZz4oJ0RSQUdfVE9fU0VMRUNUX0NPTkZJRycpO1xuZXhwb3J0IGNvbnN0IFVTRVJfQ09ORklHID0gbmV3IEluamVjdGlvblRva2VuPERyYWdUb1NlbGVjdENvbmZpZz4oJ1VTRVJfQ09ORklHJyk7XG4iLCJleHBvcnQgY29uc3QgQVVESVRfVElNRSA9IDE2O1xuZXhwb3J0IGNvbnN0IE1JTl9XSURUSCA9IDU7XG5leHBvcnQgY29uc3QgTUlOX0hFSUdIVCA9IDU7XG5leHBvcnQgY29uc3QgTk9fU0VMRUNUX0NMQVNTID0gJ2R0cy1uby1zZWxlY3QnO1xuIiwiaW1wb3J0IHsgTUlOX0hFSUdIVCwgTUlOX1dJRFRIIH0gZnJvbSAnLi9jb25zdGFudHMnO1xuaW1wb3J0IHsgQm91bmRpbmdCb3gsIE1vdXNlUG9zaXRpb24sIFNlbGVjdEJveCwgU2VsZWN0Q29udGFpbmVySG9zdCB9IGZyb20gJy4vbW9kZWxzJztcblxuZXhwb3J0IGNvbnN0IGlzT2JqZWN0ID0gKGl0ZW06IGFueSkgPT4ge1xuICByZXR1cm4gaXRlbSAmJiB0eXBlb2YgaXRlbSA9PT0gJ29iamVjdCcgJiYgIUFycmF5LmlzQXJyYXkoaXRlbSkgJiYgaXRlbSAhPT0gbnVsbDtcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBtZXJnZURlZXAodGFyZ2V0OiBPYmplY3QsIHNvdXJjZTogT2JqZWN0KSB7XG4gIGlmIChpc09iamVjdCh0YXJnZXQpICYmIGlzT2JqZWN0KHNvdXJjZSkpIHtcbiAgICBPYmplY3Qua2V5cyhzb3VyY2UpLmZvckVhY2goa2V5ID0+IHtcbiAgICAgIGlmIChpc09iamVjdChzb3VyY2Vba2V5XSkpIHtcbiAgICAgICAgaWYgKCF0YXJnZXRba2V5XSkge1xuICAgICAgICAgIE9iamVjdC5hc3NpZ24odGFyZ2V0LCB7IFtrZXldOiB7fSB9KTtcbiAgICAgICAgfVxuICAgICAgICBtZXJnZURlZXAodGFyZ2V0W2tleV0sIHNvdXJjZVtrZXldKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIE9iamVjdC5hc3NpZ24odGFyZ2V0LCB7IFtrZXldOiBzb3VyY2Vba2V5XSB9KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIHJldHVybiB0YXJnZXQ7XG59XG5cbmV4cG9ydCBjb25zdCBoYXNNaW5pbXVtU2l6ZSA9IChzZWxlY3RCb3g6IFNlbGVjdEJveDxudW1iZXI+LCBtaW5XaWR0aCA9IE1JTl9XSURUSCwgbWluSGVpZ2h0ID0gTUlOX0hFSUdIVCkgPT4ge1xuICByZXR1cm4gc2VsZWN0Qm94LndpZHRoID4gbWluV2lkdGggfHwgc2VsZWN0Qm94LmhlaWdodCA+IG1pbkhlaWdodDtcbn07XG5cbmV4cG9ydCBjb25zdCBjbGVhclNlbGVjdGlvbiA9ICh3aW5kb3c6IFdpbmRvdykgPT4ge1xuICBjb25zdCBzZWxlY3Rpb24gPSB3aW5kb3cuZ2V0U2VsZWN0aW9uKCk7XG5cbiAgaWYgKHNlbGVjdGlvbi5yZW1vdmVBbGxSYW5nZXMpIHtcbiAgICBzZWxlY3Rpb24ucmVtb3ZlQWxsUmFuZ2VzKCk7XG4gIH0gZWxzZSBpZiAoc2VsZWN0aW9uLmVtcHR5KSB7XG4gICAgc2VsZWN0aW9uLmVtcHR5KCk7XG4gIH1cbn07XG5cbmV4cG9ydCBjb25zdCBpbkJvdW5kaW5nQm94ID0gKHBvaW50OiBNb3VzZVBvc2l0aW9uLCBib3g6IEJvdW5kaW5nQm94KSA9PiB7XG4gIHJldHVybiAoXG4gICAgYm94LmxlZnQgPD0gcG9pbnQueCAmJiBwb2ludC54IDw9IGJveC5sZWZ0ICsgYm94LndpZHRoICYmIGJveC50b3AgPD0gcG9pbnQueSAmJiBwb2ludC55IDw9IGJveC50b3AgKyBib3guaGVpZ2h0XG4gICk7XG59O1xuXG5leHBvcnQgY29uc3QgYm94SW50ZXJzZWN0cyA9IChib3hBOiBCb3VuZGluZ0JveCwgYm94QjogQm91bmRpbmdCb3gpID0+IHtcbiAgcmV0dXJuIChcbiAgICBib3hBLmxlZnQgPD0gYm94Qi5sZWZ0ICsgYm94Qi53aWR0aCAmJlxuICAgIGJveEEubGVmdCArIGJveEEud2lkdGggPj0gYm94Qi5sZWZ0ICYmXG4gICAgYm94QS50b3AgPD0gYm94Qi50b3AgKyBib3hCLmhlaWdodCAmJlxuICAgIGJveEEudG9wICsgYm94QS5oZWlnaHQgPj0gYm94Qi50b3BcbiAgKTtcbn07XG5cbmV4cG9ydCBjb25zdCBjYWxjdWxhdGVCb3VuZGluZ0NsaWVudFJlY3QgPSAoZWxlbWVudDogSFRNTEVsZW1lbnQpOiBCb3VuZGluZ0JveCA9PiB7XG4gIHJldHVybiBlbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xufTtcblxuZXhwb3J0IGNvbnN0IGdldE1vdXNlUG9zaXRpb24gPSAoZXZlbnQ6IE1vdXNlRXZlbnQpID0+IHtcbiAgcmV0dXJuIHtcbiAgICB4OiBldmVudC5jbGllbnRYLFxuICAgIHk6IGV2ZW50LmNsaWVudFlcbiAgfTtcbn07XG5cbmV4cG9ydCBjb25zdCBnZXRTY3JvbGwgPSAoKSA9PiB7XG4gIGlmICghZG9jdW1lbnQgfHwgIWRvY3VtZW50LmRvY3VtZW50RWxlbWVudCkge1xuICAgIHJldHVybiB7XG4gICAgICB4OiAwLFxuICAgICAgeTogMFxuICAgIH07XG4gIH1cblxuICByZXR1cm4ge1xuICAgIHg6IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxMZWZ0IHx8IGRvY3VtZW50LmJvZHkuc2Nyb2xsTGVmdCxcbiAgICB5OiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wIHx8IGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wXG4gIH07XG59O1xuXG5leHBvcnQgY29uc3QgZ2V0UmVsYXRpdmVNb3VzZVBvc2l0aW9uID0gKGV2ZW50OiBNb3VzZUV2ZW50LCBjb250YWluZXI6IFNlbGVjdENvbnRhaW5lckhvc3QpOiBNb3VzZVBvc2l0aW9uID0+IHtcbiAgY29uc3QgeyB4OiBjbGllbnRYLCB5OiBjbGllbnRZIH0gPSBnZXRNb3VzZVBvc2l0aW9uKGV2ZW50KTtcbiAgY29uc3Qgc2Nyb2xsID0gZ2V0U2Nyb2xsKCk7XG5cbiAgY29uc3QgYm9yZGVyU2l6ZSA9IChjb250YWluZXIuYm91bmRpbmdDbGllbnRSZWN0LndpZHRoIC0gY29udGFpbmVyLmNsaWVudFdpZHRoKSAvIDI7XG4gIGNvbnN0IG9mZnNldExlZnQgPSBjb250YWluZXIuYm91bmRpbmdDbGllbnRSZWN0LmxlZnQgKyBzY3JvbGwueDtcbiAgY29uc3Qgb2Zmc2V0VG9wID0gY29udGFpbmVyLmJvdW5kaW5nQ2xpZW50UmVjdC50b3AgKyBzY3JvbGwueTtcblxuICByZXR1cm4ge1xuICAgIHg6IGNsaWVudFggLSBib3JkZXJTaXplIC0gKG9mZnNldExlZnQgLSB3aW5kb3cucGFnZVhPZmZzZXQpICsgY29udGFpbmVyLnNjcm9sbExlZnQsXG4gICAgeTogY2xpZW50WSAtIGJvcmRlclNpemUgLSAob2Zmc2V0VG9wIC0gd2luZG93LnBhZ2VZT2Zmc2V0KSArIGNvbnRhaW5lci5zY3JvbGxUb3BcbiAgfTtcbn07XG5cbmV4cG9ydCBjb25zdCBjdXJzb3JXaXRoaW5FbGVtZW50ID0gKGV2ZW50OiBNb3VzZUV2ZW50LCBlbGVtZW50OiBIVE1MRWxlbWVudCkgPT4ge1xuICBjb25zdCBtb3VzZVBvaW50ID0gZ2V0TW91c2VQb3NpdGlvbihldmVudCk7XG4gIHJldHVybiBpbkJvdW5kaW5nQm94KG1vdXNlUG9pbnQsIGNhbGN1bGF0ZUJvdW5kaW5nQ2xpZW50UmVjdChlbGVtZW50KSk7XG59O1xuIiwiaW1wb3J0IHsgaXNQbGF0Zm9ybUJyb3dzZXIgfSBmcm9tICdAYW5ndWxhci9jb21tb24nO1xuXG5pbXBvcnQge1xuICBEaXJlY3RpdmUsXG4gIERvQ2hlY2ssXG4gIEVsZW1lbnRSZWYsXG4gIEV2ZW50RW1pdHRlcixcbiAgSW5qZWN0LFxuICBJbnB1dCxcbiAgT25Jbml0LFxuICBPdXRwdXQsXG4gIFBMQVRGT1JNX0lELFxuICBSZW5kZXJlcjJcbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5cbmltcG9ydCB7IERyYWdUb1NlbGVjdENvbmZpZyB9IGZyb20gJy4vbW9kZWxzJztcbmltcG9ydCB7IENPTkZJRyB9IGZyb20gJy4vdG9rZW5zJztcbmltcG9ydCB7IGNhbGN1bGF0ZUJvdW5kaW5nQ2xpZW50UmVjdCB9IGZyb20gJy4vdXRpbHMnO1xuXG5ARGlyZWN0aXZlKHtcbiAgc2VsZWN0b3I6ICdbZHRzU2VsZWN0SXRlbV0nLFxuICBleHBvcnRBczogJ2R0c1NlbGVjdEl0ZW0nLFxuICBob3N0OiB7XG4gICAgY2xhc3M6ICdkdHMtc2VsZWN0LWl0ZW0nXG4gIH1cbn0pXG5leHBvcnQgY2xhc3MgU2VsZWN0SXRlbURpcmVjdGl2ZSBpbXBsZW1lbnRzIE9uSW5pdCwgRG9DaGVjayB7XG4gIHByaXZhdGUgX2JvdW5kaW5nQ2xpZW50UmVjdDtcblxuICBzZWxlY3RlZCA9IGZhbHNlO1xuXG4gIEBJbnB1dCgpXG4gIGR0c1NlbGVjdEl0ZW07XG5cbiAgZ2V0IHZhbHVlKCkge1xuICAgIHJldHVybiB0aGlzLmR0c1NlbGVjdEl0ZW0gPyB0aGlzLmR0c1NlbGVjdEl0ZW0gOiB0aGlzO1xuICB9XG5cbiAgY29uc3RydWN0b3IoXG4gICAgQEluamVjdChDT05GSUcpIHByaXZhdGUgY29uZmlnOiBEcmFnVG9TZWxlY3RDb25maWcsXG4gICAgQEluamVjdChQTEFURk9STV9JRCkgcHJpdmF0ZSBwbGF0Zm9ybUlkLFxuICAgIHByaXZhdGUgaG9zdDogRWxlbWVudFJlZixcbiAgICBwcml2YXRlIHJlbmRlcmVyOiBSZW5kZXJlcjJcbiAgKSB7fVxuXG4gIG5nT25Jbml0KCkge1xuICAgIGlmIChpc1BsYXRmb3JtQnJvd3Nlcih0aGlzLnBsYXRmb3JtSWQpKSB7XG4gICAgICB0aGlzLmNhbGN1bGF0ZUJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgIH1cbiAgfVxuXG4gIG5nRG9DaGVjaygpIHtcbiAgICB0aGlzLmFwcGx5U2VsZWN0ZWRDbGFzcygpO1xuICB9XG5cbiAgZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkge1xuICAgIHJldHVybiB0aGlzLl9ib3VuZGluZ0NsaWVudFJlY3Q7XG4gIH1cblxuICBjYWxjdWxhdGVCb3VuZGluZ0NsaWVudFJlY3QoKSB7XG4gICAgdGhpcy5fYm91bmRpbmdDbGllbnRSZWN0ID0gY2FsY3VsYXRlQm91bmRpbmdDbGllbnRSZWN0KHRoaXMuaG9zdC5uYXRpdmVFbGVtZW50KTtcbiAgfVxuXG4gIF9zZWxlY3QoKSB7XG4gICAgdGhpcy5zZWxlY3RlZCA9IHRydWU7XG4gIH1cblxuICBfZGVzZWxlY3QoKSB7XG4gICAgdGhpcy5zZWxlY3RlZCA9IGZhbHNlO1xuICB9XG5cbiAgcHJpdmF0ZSBhcHBseVNlbGVjdGVkQ2xhc3MoKSB7XG4gICAgaWYgKHRoaXMuc2VsZWN0ZWQpIHtcbiAgICAgIHRoaXMucmVuZGVyZXIuYWRkQ2xhc3ModGhpcy5ob3N0Lm5hdGl2ZUVsZW1lbnQsIHRoaXMuY29uZmlnLnNlbGVjdGVkQ2xhc3MpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnJlbmRlcmVyLnJlbW92ZUNsYXNzKHRoaXMuaG9zdC5uYXRpdmVFbGVtZW50LCB0aGlzLmNvbmZpZy5zZWxlY3RlZENsYXNzKTtcbiAgICB9XG4gIH1cbn1cbiIsImltcG9ydCB7IEluamVjdGFibGUsIEluamVjdCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgRHJhZ1RvU2VsZWN0Q29uZmlnIH0gZnJvbSAnLi9tb2RlbHMnO1xuaW1wb3J0IHsgQ09ORklHIH0gZnJvbSAnLi90b2tlbnMnO1xuXG5jb25zdCBTVVBQT1JURURfS0VZUyA9IHtcbiAgYWx0OiB0cnVlLFxuICBzaGlmdDogdHJ1ZSxcbiAgbWV0YTogdHJ1ZSxcbiAgY3RybDogdHJ1ZVxufTtcblxuY29uc3QgTUVUQV9LRVkgPSAnbWV0YSc7XG5cbmNvbnN0IEtFWV9BTElBU0VTID0ge1xuICBbTUVUQV9LRVldOiBbJ2N0cmwnLCAnbWV0YSddXG59O1xuXG5jb25zdCBTVVBQT1JURURfU0hPUlRDVVRTID0ge1xuICBkaXNhYmxlU2VsZWN0aW9uOiB0cnVlLFxuICB0b2dnbGVTaW5nbGVJdGVtOiB0cnVlLFxuICBhZGRUb1NlbGVjdGlvbjogdHJ1ZSxcbiAgcmVtb3ZlRnJvbVNlbGVjdGlvbjogdHJ1ZVxufTtcblxuY29uc3QgRVJST1JfUFJFRklYID0gJ1tTaG9ydGN1dFNlcnZpY2VdJztcblxuQEluamVjdGFibGUoKVxuZXhwb3J0IGNsYXNzIFNob3J0Y3V0U2VydmljZSB7XG4gIHByaXZhdGUgX3Nob3J0Y3V0czogeyBba2V5OiBzdHJpbmddOiBzdHJpbmdbXVtdIH0gPSB7fTtcblxuICBjb25zdHJ1Y3RvcihASW5qZWN0KENPTkZJRykgcHJpdmF0ZSBjb25maWc6IERyYWdUb1NlbGVjdENvbmZpZykge1xuICAgIHRoaXMuX3Nob3J0Y3V0cyA9IHRoaXMuY3JlYXRlU2hvcnRjdXRzRnJvbUNvbmZpZyhjb25maWcuc2hvcnRjdXRzKTtcbiAgfVxuXG4gIGRpc2FibGVTZWxlY3Rpb24oZXZlbnQ6IEV2ZW50KSB7XG4gICAgcmV0dXJuIHRoaXMuaXNTaG9ydGN1dFByZXNzZWQoJ2Rpc2FibGVTZWxlY3Rpb24nLCBldmVudCk7XG4gIH1cblxuICB0b2dnbGVTaW5nbGVJdGVtKGV2ZW50OiBFdmVudCkge1xuICAgIHJldHVybiB0aGlzLmlzU2hvcnRjdXRQcmVzc2VkKCd0b2dnbGVTaW5nbGVJdGVtJywgZXZlbnQpO1xuICB9XG5cbiAgYWRkVG9TZWxlY3Rpb24oZXZlbnQ6IEV2ZW50KSB7XG4gICAgcmV0dXJuIHRoaXMuaXNTaG9ydGN1dFByZXNzZWQoJ2FkZFRvU2VsZWN0aW9uJywgZXZlbnQpO1xuICB9XG5cbiAgcmVtb3ZlRnJvbVNlbGVjdGlvbihldmVudDogRXZlbnQpIHtcbiAgICByZXR1cm4gdGhpcy5pc1Nob3J0Y3V0UHJlc3NlZCgncmVtb3ZlRnJvbVNlbGVjdGlvbicsIGV2ZW50KTtcbiAgfVxuXG4gIGV4dGVuZGVkU2VsZWN0aW9uU2hvcnRjdXQoZXZlbnQ6IEV2ZW50KSB7XG4gICAgcmV0dXJuIHRoaXMuYWRkVG9TZWxlY3Rpb24oZXZlbnQpIHx8IHRoaXMucmVtb3ZlRnJvbVNlbGVjdGlvbihldmVudCk7XG4gIH1cblxuICBwcml2YXRlIGNyZWF0ZVNob3J0Y3V0c0Zyb21Db25maWcoc2hvcnRjdXRzOiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9KSB7XG4gICAgY29uc3Qgc2hvcnRjdXRNYXAgPSB7fTtcblxuICAgIGZvciAoY29uc3QgW2tleSwgc2hvcnRjdXRzRm9yQ29tbWFuZF0gb2YgT2JqZWN0LmVudHJpZXMoc2hvcnRjdXRzKSkge1xuICAgICAgaWYgKCF0aGlzLmlzU3VwcG9ydGVkU2hvcnRjdXQoa2V5KSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IodGhpcy5nZXRFcnJvck1lc3NhZ2UoYFNob3J0Y3V0ICR7a2V5fSBub3Qgc3VwcG9ydGVkYCkpO1xuICAgICAgfVxuXG4gICAgICBzaG9ydGN1dHNGb3JDb21tYW5kXG4gICAgICAgIC5yZXBsYWNlKC8gL2csICcnKVxuICAgICAgICAuc3BsaXQoJywnKVxuICAgICAgICAuZm9yRWFjaChzaG9ydGN1dCA9PiB7XG4gICAgICAgICAgaWYgKCFzaG9ydGN1dE1hcFtrZXldKSB7XG4gICAgICAgICAgICBzaG9ydGN1dE1hcFtrZXldID0gW107XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgY29uc3QgY29tYm8gPSBzaG9ydGN1dC5zcGxpdCgnKycpO1xuICAgICAgICAgIGNvbnN0IGNsZWFuQ29tYm9zID0gdGhpcy5zdWJzdGl0dXRlS2V5KHNob3J0Y3V0LCBjb21ibywgTUVUQV9LRVkpO1xuXG4gICAgICAgICAgY2xlYW5Db21ib3MuZm9yRWFjaChjbGVhbkNvbWJvID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHVuc3VwcG9ydGVkS2V5ID0gdGhpcy5pc1N1cHBvcnRlZENvbWJvKGNsZWFuQ29tYm8pO1xuXG4gICAgICAgICAgICBpZiAodW5zdXBwb3J0ZWRLZXkpIHtcbiAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKHRoaXMuZ2V0RXJyb3JNZXNzYWdlKGBLZXkgJyR7dW5zdXBwb3J0ZWRLZXl9JyBpbiBzaG9ydGN1dCAke3Nob3J0Y3V0fSBub3Qgc3VwcG9ydGVkYCkpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBzaG9ydGN1dE1hcFtrZXldLnB1c2goY2xlYW5Db21iby5tYXAoY29tYm9LZXkgPT4gYCR7Y29tYm9LZXl9S2V5YCkpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gc2hvcnRjdXRNYXA7XG4gIH1cblxuICBwcml2YXRlIHN1YnN0aXR1dGVLZXkoc2hvcnRjdXQ6IHN0cmluZywgY29tYm86IEFycmF5PHN0cmluZz4sIHN1YnN0aXR1dGVLZXk6IHN0cmluZykge1xuICAgIGNvbnN0IGhhc1NwZWNpYWxLZXkgPSBzaG9ydGN1dC5pbmNsdWRlcyhzdWJzdGl0dXRlS2V5KTtcbiAgICBjb25zdCBzdWJzdGl0dXRlZFNob3J0Y3V0ID0gW107XG5cbiAgICBpZiAoaGFzU3BlY2lhbEtleSkge1xuICAgICAgY29uc3QgY2xlYW5TaG9ydGN1dCA9IGNvbWJvLmZpbHRlcihlbGVtZW50ID0+IGVsZW1lbnQgIT09IE1FVEFfS0VZKTtcblxuICAgICAgS0VZX0FMSUFTRVMubWV0YS5mb3JFYWNoKGFsaWFzID0+IHtcbiAgICAgICAgc3Vic3RpdHV0ZWRTaG9ydGN1dC5wdXNoKFsuLi5jbGVhblNob3J0Y3V0LCBhbGlhc10pO1xuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHN1YnN0aXR1dGVkU2hvcnRjdXQucHVzaChjb21ibyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHN1YnN0aXR1dGVkU2hvcnRjdXQ7XG4gIH1cblxuICBwcml2YXRlIGdldEVycm9yTWVzc2FnZShtZXNzYWdlOiBzdHJpbmcpIHtcbiAgICByZXR1cm4gYCR7RVJST1JfUFJFRklYfSAke21lc3NhZ2V9YDtcbiAgfVxuXG4gIHByaXZhdGUgaXNTaG9ydGN1dFByZXNzZWQoc2hvcnRjdXROYW1lOiBzdHJpbmcsIGV2ZW50OiBFdmVudCkge1xuICAgIGNvbnN0IHNob3J0Y3V0cyA9IHRoaXMuX3Nob3J0Y3V0c1tzaG9ydGN1dE5hbWVdO1xuXG4gICAgcmV0dXJuIHNob3J0Y3V0cy5zb21lKHNob3J0Y3V0ID0+IHtcbiAgICAgIHJldHVybiBzaG9ydGN1dC5ldmVyeShrZXkgPT4gZXZlbnRba2V5XSk7XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIGlzU3VwcG9ydGVkQ29tYm8oY29tYm86IEFycmF5PHN0cmluZz4pIHtcbiAgICBsZXQgdW5zdXBwb3J0ZWRLZXkgPSBudWxsO1xuXG4gICAgY29tYm8uZm9yRWFjaChrZXkgPT4ge1xuICAgICAgaWYgKCFTVVBQT1JURURfS0VZU1trZXldKSB7XG4gICAgICAgIHVuc3VwcG9ydGVkS2V5ID0ga2V5O1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICByZXR1cm4gdW5zdXBwb3J0ZWRLZXk7XG4gIH1cblxuICBwcml2YXRlIGlzU3VwcG9ydGVkU2hvcnRjdXQoc2hvcnRjdXQ6IHN0cmluZykge1xuICAgIHJldHVybiBTVVBQT1JURURfU0hPUlRDVVRTW3Nob3J0Y3V0XTtcbiAgfVxufVxuIiwiaW1wb3J0IHsgT2JzZXJ2YWJsZSwgcGlwZSB9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHsgZmlsdGVyLCBtYXAsIHdpdGhMYXRlc3RGcm9tLCBkaXN0aW5jdFVudGlsQ2hhbmdlZCB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcbmltcG9ydCB7IE1vdXNlUG9zaXRpb24sIFNlbGVjdEJveCwgU2VsZWN0Qm94SW5wdXQsIFNlbGVjdENvbnRhaW5lckhvc3QgfSBmcm9tICcuL21vZGVscyc7XG5pbXBvcnQgeyBnZXRSZWxhdGl2ZU1vdXNlUG9zaXRpb24sIGhhc01pbmltdW1TaXplIH0gZnJvbSAnLi91dGlscyc7XG5cbmV4cG9ydCBjb25zdCBjcmVhdGVTZWxlY3RCb3ggPSAoY29udGFpbmVyOiBTZWxlY3RDb250YWluZXJIb3N0KSA9PiAoXG4gIHNvdXJjZTogT2JzZXJ2YWJsZTxTZWxlY3RCb3hJbnB1dD5cbik6IE9ic2VydmFibGU8U2VsZWN0Qm94PG51bWJlcj4+ID0+XG4gIHNvdXJjZS5waXBlKFxuICAgIG1hcCgoW2V2ZW50LCBvcGFjaXR5LCB7IHgsIHkgfV0pID0+IHtcbiAgICAgIC8vIFR5cGUgYW5ub3RhdGlvbiBpcyByZXF1aXJlZCBoZXJlLCBiZWNhdXNlIGBnZXRSZWxhdGl2ZU1vdXNlUG9zaXRpb25gIHJldHVybnMgYSBgTW91c2VQb3NpdGlvbmAsXG4gICAgICAvLyB0aGUgVFMgY29tcGlsZXIgY2Fubm90IGZpZ3VyZSBvdXQgdGhlIHNoYXBlIG9mIHRoaXMgdHlwZS5cbiAgICAgIGNvbnN0IG1vdXNlUG9zaXRpb246IE1vdXNlUG9zaXRpb24gPSBnZXRSZWxhdGl2ZU1vdXNlUG9zaXRpb24oZXZlbnQsIGNvbnRhaW5lcik7XG5cbiAgICAgIGNvbnN0IHdpZHRoID0gb3BhY2l0eSA+IDAgPyBtb3VzZVBvc2l0aW9uLnggLSB4IDogMDtcbiAgICAgIGNvbnN0IGhlaWdodCA9IG9wYWNpdHkgPiAwID8gbW91c2VQb3NpdGlvbi55IC0geSA6IDA7XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIHRvcDogaGVpZ2h0IDwgMCA/IG1vdXNlUG9zaXRpb24ueSA6IHksXG4gICAgICAgIGxlZnQ6IHdpZHRoIDwgMCA/IG1vdXNlUG9zaXRpb24ueCA6IHgsXG4gICAgICAgIHdpZHRoOiBNYXRoLmFicyh3aWR0aCksXG4gICAgICAgIGhlaWdodDogTWF0aC5hYnMoaGVpZ2h0KSxcbiAgICAgICAgb3BhY2l0eVxuICAgICAgfTtcbiAgICB9KVxuICApO1xuXG5leHBvcnQgY29uc3Qgd2hlblNlbGVjdEJveFZpc2libGUgPSAoc2VsZWN0Qm94JDogT2JzZXJ2YWJsZTxTZWxlY3RCb3g8bnVtYmVyPj4pID0+IChzb3VyY2U6IE9ic2VydmFibGU8RXZlbnQ+KSA9PlxuICBzb3VyY2UucGlwZShcbiAgICB3aXRoTGF0ZXN0RnJvbShzZWxlY3RCb3gkKSxcbiAgICBmaWx0ZXIoKFssIHNlbGVjdEJveF0pID0+IGhhc01pbmltdW1TaXplKHNlbGVjdEJveCwgMCwgMCkpLFxuICAgIG1hcCgoW2V2ZW50LCBfXSkgPT4gZXZlbnQpXG4gICk7XG5cbmV4cG9ydCBjb25zdCBkaXN0aW5jdEtleUV2ZW50cyA9ICgpID0+IChzb3VyY2U6IE9ic2VydmFibGU8S2V5Ym9hcmRFdmVudD4pID0+XG4gIHNvdXJjZS5waXBlKFxuICAgIGRpc3RpbmN0VW50aWxDaGFuZ2VkKChwcmV2LCBjdXJyKSA9PiB7XG4gICAgICByZXR1cm4gcHJldi5rZXlDb2RlID09PSBjdXJyLmtleUNvZGU7XG4gICAgfSlcbiAgKTtcbiIsImltcG9ydCB7IE9ic2VydmFibGUgfSBmcm9tICdyeGpzJztcbmltcG9ydCB7IFNlbGVjdEl0ZW1EaXJlY3RpdmUgfSBmcm9tICcuL3NlbGVjdC1pdGVtLmRpcmVjdGl2ZSc7XG5cbmV4cG9ydCB0eXBlIFByZWRpY2F0ZUZuPFQ+ID0gKGl0ZW06IFQpID0+IGJvb2xlYW47XG5cbmV4cG9ydCBlbnVtIFVwZGF0ZUFjdGlvbnMge1xuICBBZGQsXG4gIFJlbW92ZVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIFVwZGF0ZUFjdGlvbiB7XG4gIHR5cGU6IFVwZGF0ZUFjdGlvbnM7XG4gIGl0ZW06IFNlbGVjdEl0ZW1EaXJlY3RpdmU7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgT2JzZXJ2YWJsZVByb3h5PFQ+IHtcbiAgcHJveHkkOiBPYnNlcnZhYmxlPGFueT47XG4gIHByb3h5OiBUO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFNlbGVjdENvbnRhaW5lckhvc3QgZXh0ZW5kcyBIVE1MRWxlbWVudCB7XG4gIGJvdW5kaW5nQ2xpZW50UmVjdDogQm91bmRpbmdCb3g7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU2hvcnRjdXRzIHtcbiAgZGlzYWJsZVNlbGVjdGlvbjogc3RyaW5nO1xuICB0b2dnbGVTaW5nbGVJdGVtOiBzdHJpbmc7XG4gIGFkZFRvU2VsZWN0aW9uOiBzdHJpbmc7XG4gIHJlbW92ZUZyb21TZWxlY3Rpb246IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBEcmFnVG9TZWxlY3RDb25maWcge1xuICBzZWxlY3RlZENsYXNzOiBzdHJpbmc7XG4gIHNob3J0Y3V0czogUGFydGlhbDxTaG9ydGN1dHM+O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIE1vdXNlUG9zaXRpb24ge1xuICB4OiBudW1iZXI7XG4gIHk6IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBCb3VuZGluZ0JveCB7XG4gIHRvcDogbnVtYmVyO1xuICBsZWZ0OiBudW1iZXI7XG4gIHdpZHRoOiBudW1iZXI7XG4gIGhlaWdodDogbnVtYmVyO1xufVxuXG5leHBvcnQgdHlwZSBTZWxlY3RCb3hJbnB1dCA9IFtNb3VzZUV2ZW50LCBudW1iZXIsIE1vdXNlUG9zaXRpb25dO1xuXG5leHBvcnQgaW50ZXJmYWNlIFNlbGVjdEJveDxUPiB7XG4gIHRvcDogVDtcbiAgbGVmdDogVDtcbiAgd2lkdGg6IFQ7XG4gIGhlaWdodDogVDtcbiAgb3BhY2l0eTogbnVtYmVyO1xufVxuXG5leHBvcnQgZW51bSBBY3Rpb24ge1xuICBBZGQsXG4gIERlbGV0ZSxcbiAgTm9uZVxufVxuIiwiaW1wb3J0IHtcbiAgQ29tcG9uZW50LFxuICBFbGVtZW50UmVmLFxuICBPdXRwdXQsXG4gIEV2ZW50RW1pdHRlcixcbiAgSW5wdXQsXG4gIE9uRGVzdHJveSxcbiAgUmVuZGVyZXIyLFxuICBWaWV3Q2hpbGQsXG4gIE5nWm9uZSxcbiAgQ29udGVudENoaWxkcmVuLFxuICBRdWVyeUxpc3QsXG4gIEhvc3RCaW5kaW5nLFxuICBBZnRlclZpZXdJbml0LFxuICBQTEFURk9STV9JRCxcbiAgSW5qZWN0XG59IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuXG5pbXBvcnQgeyBpc1BsYXRmb3JtQnJvd3NlciB9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbic7XG5cbmltcG9ydCB7IE9ic2VydmFibGUsIFN1YmplY3QsIGNvbWJpbmVMYXRlc3QsIG1lcmdlLCBmcm9tLCBmcm9tRXZlbnQsIEJlaGF2aW9yU3ViamVjdCwgYXN5bmNTY2hlZHVsZXIgfSBmcm9tICdyeGpzJztcblxuaW1wb3J0IHtcbiAgc3dpdGNoTWFwLFxuICB0YWtlVW50aWwsXG4gIG1hcCxcbiAgdGFwLFxuICBmaWx0ZXIsXG4gIGF1ZGl0VGltZSxcbiAgbWFwVG8sXG4gIHNoYXJlLFxuICB3aXRoTGF0ZXN0RnJvbSxcbiAgZGlzdGluY3RVbnRpbENoYW5nZWQsXG4gIG9ic2VydmVPbixcbiAgc3RhcnRXaXRoLFxuICBjb25jYXRNYXBUbyxcbiAgZmlyc3Rcbn0gZnJvbSAncnhqcy9vcGVyYXRvcnMnO1xuXG5pbXBvcnQgeyBTZWxlY3RJdGVtRGlyZWN0aXZlIH0gZnJvbSAnLi9zZWxlY3QtaXRlbS5kaXJlY3RpdmUnO1xuaW1wb3J0IHsgU2hvcnRjdXRTZXJ2aWNlIH0gZnJvbSAnLi9zaG9ydGN1dC5zZXJ2aWNlJztcblxuaW1wb3J0IHsgY3JlYXRlU2VsZWN0Qm94LCB3aGVuU2VsZWN0Qm94VmlzaWJsZSwgZGlzdGluY3RLZXlFdmVudHMgfSBmcm9tICcuL29wZXJhdG9ycyc7XG5cbmltcG9ydCB7XG4gIEFjdGlvbixcbiAgU2VsZWN0Qm94LFxuICBNb3VzZVBvc2l0aW9uLFxuICBTZWxlY3RDb250YWluZXJIb3N0LFxuICBVcGRhdGVBY3Rpb24sXG4gIFVwZGF0ZUFjdGlvbnMsXG4gIFByZWRpY2F0ZUZuXG59IGZyb20gJy4vbW9kZWxzJztcblxuaW1wb3J0IHsgQVVESVRfVElNRSwgTk9fU0VMRUNUX0NMQVNTIH0gZnJvbSAnLi9jb25zdGFudHMnO1xuXG5pbXBvcnQge1xuICBpbkJvdW5kaW5nQm94LFxuICBjdXJzb3JXaXRoaW5FbGVtZW50LFxuICBjbGVhclNlbGVjdGlvbixcbiAgYm94SW50ZXJzZWN0cyxcbiAgY2FsY3VsYXRlQm91bmRpbmdDbGllbnRSZWN0LFxuICBnZXRSZWxhdGl2ZU1vdXNlUG9zaXRpb24sXG4gIGdldE1vdXNlUG9zaXRpb24sXG4gIGhhc01pbmltdW1TaXplXG59IGZyb20gJy4vdXRpbHMnO1xuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICdkdHMtc2VsZWN0LWNvbnRhaW5lcicsXG4gIGV4cG9ydEFzOiAnZHRzLXNlbGVjdC1jb250YWluZXInLFxuICBob3N0OiB7XG4gICAgY2xhc3M6ICdkdHMtc2VsZWN0LWNvbnRhaW5lcidcbiAgfSxcbiAgdGVtcGxhdGU6IGBcbiAgICA8bmctY29udGVudD48L25nLWNvbnRlbnQ+XG4gICAgPGRpdlxuICAgICAgY2xhc3M9XCJkdHMtc2VsZWN0LWJveFwiXG4gICAgICAjc2VsZWN0Qm94XG4gICAgICBbbmdDbGFzc109XCJzZWxlY3RCb3hDbGFzc2VzJCB8IGFzeW5jXCJcbiAgICAgIFtuZ1N0eWxlXT1cInNlbGVjdEJveFN0eWxlcyQgfCBhc3luY1wiXG4gICAgPjwvZGl2PlxuICBgLFxuICBzdHlsZVVybHM6IFsnLi9zZWxlY3QtY29udGFpbmVyLmNvbXBvbmVudC5zY3NzJ11cbn0pXG5leHBvcnQgY2xhc3MgU2VsZWN0Q29udGFpbmVyQ29tcG9uZW50IGltcGxlbWVudHMgQWZ0ZXJWaWV3SW5pdCwgT25EZXN0cm95IHtcbiAgaG9zdDogU2VsZWN0Q29udGFpbmVySG9zdDtcbiAgc2VsZWN0Qm94U3R5bGVzJDogT2JzZXJ2YWJsZTxTZWxlY3RCb3g8c3RyaW5nPj47XG4gIHNlbGVjdEJveENsYXNzZXMkOiBPYnNlcnZhYmxlPHsgW2tleTogc3RyaW5nXTogYm9vbGVhbiB9PjtcblxuICBAVmlld0NoaWxkKCdzZWxlY3RCb3gnKVxuICBwcml2YXRlICRzZWxlY3RCb3g6IEVsZW1lbnRSZWY7XG5cbiAgQENvbnRlbnRDaGlsZHJlbihTZWxlY3RJdGVtRGlyZWN0aXZlLCB7IGRlc2NlbmRhbnRzOiB0cnVlIH0pXG4gIHByaXZhdGUgJHNlbGVjdGFibGVJdGVtczogUXVlcnlMaXN0PFNlbGVjdEl0ZW1EaXJlY3RpdmU+O1xuXG4gIEBJbnB1dCgpXG4gIHNlbGVjdGVkSXRlbXM6IGFueTtcblxuICBASW5wdXQoKVxuICBzZWxlY3RPbkRyYWcgPSB0cnVlO1xuXG4gIEBJbnB1dCgpXG4gIGRpc2FibGVkID0gZmFsc2U7XG5cbiAgQElucHV0KClcbiAgZGlzYWJsZURyYWcgPSBmYWxzZTtcblxuICBASW5wdXQoKVxuICBzZWxlY3RNb2RlID0gZmFsc2U7XG5cbiAgQElucHV0KClcbiAgc2VsZWN0V2l0aFNob3J0Y3V0ID0gZmFsc2U7XG5cbiAgQElucHV0KClcbiAgQEhvc3RCaW5kaW5nKCdjbGFzcy5kdHMtY3VzdG9tJylcbiAgY3VzdG9tID0gZmFsc2U7XG5cbiAgQE91dHB1dCgpXG4gIHNlbGVjdGVkSXRlbXNDaGFuZ2UgPSBuZXcgRXZlbnRFbWl0dGVyPGFueT4oKTtcblxuICBAT3V0cHV0KClcbiAgc2VsZWN0ID0gbmV3IEV2ZW50RW1pdHRlcjxhbnk+KCk7XG5cbiAgQE91dHB1dCgpXG4gIGl0ZW1TZWxlY3RlZCA9IG5ldyBFdmVudEVtaXR0ZXI8YW55PigpO1xuXG4gIEBPdXRwdXQoKVxuICBpdGVtRGVzZWxlY3RlZCA9IG5ldyBFdmVudEVtaXR0ZXI8YW55PigpO1xuXG4gIEBPdXRwdXQoKVxuICBzZWxlY3Rpb25TdGFydGVkID0gbmV3IEV2ZW50RW1pdHRlcjx2b2lkPigpO1xuXG4gIEBPdXRwdXQoKVxuICBzZWxlY3Rpb25FbmRlZCA9IG5ldyBFdmVudEVtaXR0ZXI8QXJyYXk8YW55Pj4oKTtcblxuICBwcml2YXRlIF90bXBJdGVtcyA9IG5ldyBNYXA8U2VsZWN0SXRlbURpcmVjdGl2ZSwgQWN0aW9uPigpO1xuXG4gIHByaXZhdGUgX3NlbGVjdGVkSXRlbXMkID0gbmV3IEJlaGF2aW9yU3ViamVjdDxBcnJheTxhbnk+PihbXSk7XG4gIHByaXZhdGUgdXBkYXRlSXRlbXMkID0gbmV3IFN1YmplY3Q8VXBkYXRlQWN0aW9uPigpO1xuICBwcml2YXRlIGRlc3Ryb3kkID0gbmV3IFN1YmplY3Q8dm9pZD4oKTtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBASW5qZWN0KFBMQVRGT1JNX0lEKSBwcml2YXRlIHBsYXRmb3JtSWQsXG4gICAgcHJpdmF0ZSBzaG9ydGN1dHM6IFNob3J0Y3V0U2VydmljZSxcbiAgICBwcml2YXRlIGhvc3RFbGVtZW50UmVmOiBFbGVtZW50UmVmLFxuICAgIHByaXZhdGUgcmVuZGVyZXI6IFJlbmRlcmVyMixcbiAgICBwcml2YXRlIG5nWm9uZTogTmdab25lXG4gICkge31cblxuICBuZ0FmdGVyVmlld0luaXQoKSB7XG4gICAgaWYgKGlzUGxhdGZvcm1Ccm93c2VyKHRoaXMucGxhdGZvcm1JZCkpIHtcbiAgICAgIHRoaXMuaG9zdCA9IHRoaXMuaG9zdEVsZW1lbnRSZWYubmF0aXZlRWxlbWVudDtcblxuICAgICAgdGhpcy5faW5pdFNlbGVjdGVkSXRlbXNDaGFuZ2UoKTtcblxuICAgICAgdGhpcy5fY2FsY3VsYXRlQm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICB0aGlzLl9vYnNlcnZlQm91bmRpbmdSZWN0Q2hhbmdlcygpO1xuICAgICAgdGhpcy5fb2JzZXJ2ZVNlbGVjdGFibGVJdGVtcygpO1xuXG4gICAgICAvLyBkaXN0aW5jdEtleUV2ZW50cyBpcyB1c2VkIHRvIHByZXZlbnQgbXVsdGlwbGUga2V5IGV2ZW50cyB0byBiZSBmaXJlZCByZXBlYXRlZGx5XG4gICAgICAvLyBvbiBXaW5kb3dzIHdoZW4gYSBrZXkgaXMgYmVpbmcgcHJlc3NlZFxuXG4gICAgICBjb25zdCBrZXlkb3duJCA9IGZyb21FdmVudDxLZXlib2FyZEV2ZW50Pih3aW5kb3csICdrZXlkb3duJykucGlwZShcbiAgICAgICAgZGlzdGluY3RLZXlFdmVudHMoKSxcbiAgICAgICAgc2hhcmUoKVxuICAgICAgKTtcblxuICAgICAgY29uc3Qga2V5dXAkID0gZnJvbUV2ZW50PEtleWJvYXJkRXZlbnQ+KHdpbmRvdywgJ2tleXVwJykucGlwZShcbiAgICAgICAgZGlzdGluY3RLZXlFdmVudHMoKSxcbiAgICAgICAgc2hhcmUoKVxuICAgICAgKTtcblxuICAgICAgY29uc3QgbW91c2V1cCQgPSBmcm9tRXZlbnQ8TW91c2VFdmVudD4od2luZG93LCAnbW91c2V1cCcpLnBpcGUoXG4gICAgICAgIGZpbHRlcigoKSA9PiAhdGhpcy5kaXNhYmxlZCksXG4gICAgICAgIHRhcCgoKSA9PiB0aGlzLl9vbk1vdXNlVXAoKSksXG4gICAgICAgIHNoYXJlKClcbiAgICAgICk7XG5cbiAgICAgIGNvbnN0IG1vdXNlbW92ZSQgPSBmcm9tRXZlbnQ8TW91c2VFdmVudD4od2luZG93LCAnbW91c2Vtb3ZlJykucGlwZShcbiAgICAgICAgZmlsdGVyKCgpID0+ICF0aGlzLmRpc2FibGVkKSxcbiAgICAgICAgc2hhcmUoKVxuICAgICAgKTtcblxuICAgICAgY29uc3QgbW91c2Vkb3duJCA9IGZyb21FdmVudDxNb3VzZUV2ZW50Pih0aGlzLmhvc3QsICdtb3VzZWRvd24nKS5waXBlKFxuICAgICAgICBmaWx0ZXIoZXZlbnQgPT4gZXZlbnQuYnV0dG9uID09PSAwKSwgLy8gb25seSBlbWl0IGxlZnQgbW91c2VcbiAgICAgICAgZmlsdGVyKCgpID0+ICF0aGlzLmRpc2FibGVkKSxcbiAgICAgICAgdGFwKGV2ZW50ID0+IHRoaXMuX29uTW91c2VEb3duKGV2ZW50KSksXG4gICAgICAgIHNoYXJlKClcbiAgICAgICk7XG5cbiAgICAgIGNvbnN0IGRyYWdnaW5nJCA9IG1vdXNlZG93biQucGlwZShcbiAgICAgICAgZmlsdGVyKGV2ZW50ID0+ICF0aGlzLnNob3J0Y3V0cy5kaXNhYmxlU2VsZWN0aW9uKGV2ZW50KSksXG4gICAgICAgIGZpbHRlcigoKSA9PiAhdGhpcy5zZWxlY3RNb2RlKSxcbiAgICAgICAgZmlsdGVyKCgpID0+ICF0aGlzLmRpc2FibGVEcmFnKSxcbiAgICAgICAgc3dpdGNoTWFwKCgpID0+IG1vdXNlbW92ZSQucGlwZSh0YWtlVW50aWwobW91c2V1cCQpKSksXG4gICAgICAgIHNoYXJlKClcbiAgICAgICk7XG5cbiAgICAgIGNvbnN0IGN1cnJlbnRNb3VzZVBvc2l0aW9uJDogT2JzZXJ2YWJsZTxNb3VzZVBvc2l0aW9uPiA9IG1vdXNlZG93biQucGlwZShcbiAgICAgICAgbWFwKChldmVudDogTW91c2VFdmVudCkgPT4gZ2V0UmVsYXRpdmVNb3VzZVBvc2l0aW9uKGV2ZW50LCB0aGlzLmhvc3QpKVxuICAgICAgKTtcblxuICAgICAgY29uc3Qgc2hvdyQgPSBkcmFnZ2luZyQucGlwZShtYXBUbygxKSk7XG4gICAgICBjb25zdCBoaWRlJCA9IG1vdXNldXAkLnBpcGUobWFwVG8oMCkpO1xuICAgICAgY29uc3Qgb3BhY2l0eSQgPSBtZXJnZShzaG93JCwgaGlkZSQpLnBpcGUoZGlzdGluY3RVbnRpbENoYW5nZWQoKSk7XG5cbiAgICAgIGNvbnN0IHNlbGVjdEJveCQgPSBjb21iaW5lTGF0ZXN0KGRyYWdnaW5nJCwgb3BhY2l0eSQsIGN1cnJlbnRNb3VzZVBvc2l0aW9uJCkucGlwZShcbiAgICAgICAgY3JlYXRlU2VsZWN0Qm94KHRoaXMuaG9zdCksXG4gICAgICAgIHNoYXJlKClcbiAgICAgICk7XG5cbiAgICAgIHRoaXMuc2VsZWN0Qm94Q2xhc3NlcyQgPSBtZXJnZShkcmFnZ2luZyQsIG1vdXNldXAkLCBrZXlkb3duJCwga2V5dXAkKS5waXBlKFxuICAgICAgICBhdWRpdFRpbWUoQVVESVRfVElNRSksXG4gICAgICAgIHdpdGhMYXRlc3RGcm9tKHNlbGVjdEJveCQpLFxuICAgICAgICBtYXAoKFtldmVudCwgc2VsZWN0Qm94XSkgPT4ge1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAnZHRzLWFkZGluZyc6IGhhc01pbmltdW1TaXplKHNlbGVjdEJveCwgMCwgMCkgJiYgIXRoaXMuc2hvcnRjdXRzLnJlbW92ZUZyb21TZWxlY3Rpb24oZXZlbnQpLFxuICAgICAgICAgICAgJ2R0cy1yZW1vdmluZyc6IHRoaXMuc2hvcnRjdXRzLnJlbW92ZUZyb21TZWxlY3Rpb24oZXZlbnQpXG4gICAgICAgICAgfTtcbiAgICAgICAgfSksXG4gICAgICAgIGRpc3RpbmN0VW50aWxDaGFuZ2VkKChhLCBiKSA9PiBKU09OLnN0cmluZ2lmeShhKSA9PT0gSlNPTi5zdHJpbmdpZnkoYikpXG4gICAgICApO1xuXG4gICAgICBjb25zdCBzZWxlY3RPbk1vdXNlVXAkID0gZHJhZ2dpbmckLnBpcGUoXG4gICAgICAgIGZpbHRlcigoKSA9PiAhdGhpcy5zZWxlY3RPbkRyYWcpLFxuICAgICAgICBmaWx0ZXIoKCkgPT4gIXRoaXMuc2VsZWN0TW9kZSksXG4gICAgICAgIGZpbHRlcihldmVudCA9PiB0aGlzLl9jdXJzb3JXaXRoaW5Ib3N0KGV2ZW50KSksXG4gICAgICAgIHN3aXRjaE1hcChfID0+IG1vdXNldXAkLnBpcGUoZmlyc3QoKSkpLFxuICAgICAgICBmaWx0ZXIoXG4gICAgICAgICAgZXZlbnQgPT5cbiAgICAgICAgICAgICghdGhpcy5zaG9ydGN1dHMuZGlzYWJsZVNlbGVjdGlvbihldmVudCkgJiYgIXRoaXMuc2hvcnRjdXRzLnRvZ2dsZVNpbmdsZUl0ZW0oZXZlbnQpKSB8fFxuICAgICAgICAgICAgdGhpcy5zaG9ydGN1dHMucmVtb3ZlRnJvbVNlbGVjdGlvbihldmVudClcbiAgICAgICAgKVxuICAgICAgKTtcblxuICAgICAgY29uc3Qgc2VsZWN0T25EcmFnJCA9IHNlbGVjdEJveCQucGlwZShcbiAgICAgICAgYXVkaXRUaW1lKEFVRElUX1RJTUUpLFxuICAgICAgICB3aXRoTGF0ZXN0RnJvbShtb3VzZW1vdmUkLCAoc2VsZWN0Qm94LCBldmVudDogTW91c2VFdmVudCkgPT4gKHtcbiAgICAgICAgICBzZWxlY3RCb3gsXG4gICAgICAgICAgZXZlbnRcbiAgICAgICAgfSkpLFxuICAgICAgICBmaWx0ZXIoKCkgPT4gdGhpcy5zZWxlY3RPbkRyYWcpLFxuICAgICAgICBmaWx0ZXIoKHsgc2VsZWN0Qm94IH0pID0+IGhhc01pbmltdW1TaXplKHNlbGVjdEJveCkpLFxuICAgICAgICBtYXAoKHsgZXZlbnQgfSkgPT4gZXZlbnQpXG4gICAgICApO1xuXG4gICAgICBjb25zdCBzZWxlY3RPbktleWJvYXJkRXZlbnQkID0gbWVyZ2Uoa2V5ZG93biQsIGtleXVwJCkucGlwZShcbiAgICAgICAgYXVkaXRUaW1lKEFVRElUX1RJTUUpLFxuICAgICAgICB3aGVuU2VsZWN0Qm94VmlzaWJsZShzZWxlY3RCb3gkKSxcbiAgICAgICAgdGFwKGV2ZW50ID0+IHtcbiAgICAgICAgICBpZiAodGhpcy5faXNFeHRlbmRlZFNlbGVjdGlvbihldmVudCkpIHtcbiAgICAgICAgICAgIHRoaXMuX3RtcEl0ZW1zLmNsZWFyKCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX2ZsdXNoSXRlbXMoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICApO1xuXG4gICAgICBtZXJnZShzZWxlY3RPbk1vdXNlVXAkLCBzZWxlY3RPbkRyYWckLCBzZWxlY3RPbktleWJvYXJkRXZlbnQkKVxuICAgICAgICAucGlwZSh0YWtlVW50aWwodGhpcy5kZXN0cm95JCkpXG4gICAgICAgIC5zdWJzY3JpYmUoZXZlbnQgPT4gdGhpcy5fc2VsZWN0SXRlbXMoZXZlbnQpKTtcblxuICAgICAgdGhpcy5zZWxlY3RCb3hTdHlsZXMkID0gc2VsZWN0Qm94JC5waXBlKFxuICAgICAgICBtYXAoc2VsZWN0Qm94ID0+ICh7XG4gICAgICAgICAgdG9wOiBgJHtzZWxlY3RCb3gudG9wfXB4YCxcbiAgICAgICAgICBsZWZ0OiBgJHtzZWxlY3RCb3gubGVmdH1weGAsXG4gICAgICAgICAgd2lkdGg6IGAke3NlbGVjdEJveC53aWR0aH1weGAsXG4gICAgICAgICAgaGVpZ2h0OiBgJHtzZWxlY3RCb3guaGVpZ2h0fXB4YCxcbiAgICAgICAgICBvcGFjaXR5OiBzZWxlY3RCb3gub3BhY2l0eVxuICAgICAgICB9KSlcbiAgICAgICk7XG5cbiAgICAgIHRoaXMuX2luaXRTZWxlY3Rpb25PdXRwdXRzKG1vdXNlZG93biQsIG1vdXNldXAkKTtcbiAgICB9XG4gIH1cblxuICBzZWxlY3RBbGwoKSB7XG4gICAgdGhpcy4kc2VsZWN0YWJsZUl0ZW1zLmZvckVhY2goaXRlbSA9PiB7XG4gICAgICB0aGlzLl9zZWxlY3RJdGVtKGl0ZW0pO1xuICAgIH0pO1xuICB9XG5cbiAgdG9nZ2xlSXRlbXM8VD4ocHJlZGljYXRlOiBQcmVkaWNhdGVGbjxUPikge1xuICAgIHRoaXMuX2ZpbHRlclNlbGVjdGFibGVJdGVtcyhwcmVkaWNhdGUpLnN1YnNjcmliZSgoaXRlbTogU2VsZWN0SXRlbURpcmVjdGl2ZSkgPT4gdGhpcy5fdG9nZ2xlSXRlbShpdGVtKSk7XG4gIH1cblxuICBzZWxlY3RJdGVtczxUPihwcmVkaWNhdGU6IFByZWRpY2F0ZUZuPFQ+KSB7XG4gICAgdGhpcy5fZmlsdGVyU2VsZWN0YWJsZUl0ZW1zKHByZWRpY2F0ZSkuc3Vic2NyaWJlKChpdGVtOiBTZWxlY3RJdGVtRGlyZWN0aXZlKSA9PiB0aGlzLl9zZWxlY3RJdGVtKGl0ZW0pKTtcbiAgfVxuXG4gIGRlc2VsZWN0SXRlbXM8VD4ocHJlZGljYXRlOiBQcmVkaWNhdGVGbjxUPikge1xuICAgIHRoaXMuX2ZpbHRlclNlbGVjdGFibGVJdGVtcyhwcmVkaWNhdGUpLnN1YnNjcmliZSgoaXRlbTogU2VsZWN0SXRlbURpcmVjdGl2ZSkgPT4gdGhpcy5fZGVzZWxlY3RJdGVtKGl0ZW0pKTtcbiAgfVxuXG4gIGNsZWFyU2VsZWN0aW9uKCkge1xuICAgIHRoaXMuJHNlbGVjdGFibGVJdGVtcy5mb3JFYWNoKGl0ZW0gPT4ge1xuICAgICAgdGhpcy5fZGVzZWxlY3RJdGVtKGl0ZW0pO1xuICAgIH0pO1xuICB9XG5cbiAgdXBkYXRlKCkge1xuICAgIHRoaXMuX2NhbGN1bGF0ZUJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgIHRoaXMuJHNlbGVjdGFibGVJdGVtcy5mb3JFYWNoKGl0ZW0gPT4gaXRlbS5jYWxjdWxhdGVCb3VuZGluZ0NsaWVudFJlY3QoKSk7XG4gIH1cblxuICBuZ09uRGVzdHJveSgpIHtcbiAgICB0aGlzLmRlc3Ryb3kkLm5leHQoKTtcbiAgICB0aGlzLmRlc3Ryb3kkLmNvbXBsZXRlKCk7XG4gIH1cblxuICBwcml2YXRlIF9maWx0ZXJTZWxlY3RhYmxlSXRlbXM8VD4ocHJlZGljYXRlOiBQcmVkaWNhdGVGbjxUPikge1xuICAgIC8vIFdyYXAgc2VsZWN0IGl0ZW1zIGluIGFuIG9ic2VydmFibGUgZm9yIGJldHRlciBlZmZpY2llbmN5IGFzXG4gICAgLy8gbm8gaW50ZXJtZWRpYXRlIGFycmF5cyBhcmUgY3JlYXRlZCBhbmQgd2Ugb25seSBuZWVkIHRvIHByb2Nlc3NcbiAgICAvLyBldmVyeSBpdGVtIG9uY2UuXG4gICAgcmV0dXJuIGZyb20odGhpcy4kc2VsZWN0YWJsZUl0ZW1zLnRvQXJyYXkoKSkucGlwZShmaWx0ZXIoaXRlbSA9PiBwcmVkaWNhdGUoaXRlbS52YWx1ZSkpKTtcbiAgfVxuXG4gIHByaXZhdGUgX2luaXRTZWxlY3RlZEl0ZW1zQ2hhbmdlKCkge1xuICAgIHRoaXMuX3NlbGVjdGVkSXRlbXMkXG4gICAgICAucGlwZShcbiAgICAgICAgYXVkaXRUaW1lKEFVRElUX1RJTUUpLFxuICAgICAgICB0YWtlVW50aWwodGhpcy5kZXN0cm95JClcbiAgICAgIClcbiAgICAgIC5zdWJzY3JpYmUoe1xuICAgICAgICBuZXh0OiBzZWxlY3RlZEl0ZW1zID0+IHtcbiAgICAgICAgICB0aGlzLnNlbGVjdGVkSXRlbXNDaGFuZ2UuZW1pdChzZWxlY3RlZEl0ZW1zKTtcbiAgICAgICAgICB0aGlzLnNlbGVjdC5lbWl0KHNlbGVjdGVkSXRlbXMpO1xuICAgICAgICB9LFxuICAgICAgICBjb21wbGV0ZTogKCkgPT4ge1xuICAgICAgICAgIHRoaXMuc2VsZWN0ZWRJdGVtc0NoYW5nZS5lbWl0KFtdKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gIH1cblxuICBwcml2YXRlIF9vYnNlcnZlU2VsZWN0YWJsZUl0ZW1zKCkge1xuICAgIC8vIExpc3RlbiBmb3IgdXBkYXRlcyBhbmQgZWl0aGVyIHNlbGVjdCBvciBkZXNlbGVjdCBhbiBpdGVtXG4gICAgdGhpcy51cGRhdGVJdGVtcyRcbiAgICAgIC5waXBlKFxuICAgICAgICB3aXRoTGF0ZXN0RnJvbSh0aGlzLl9zZWxlY3RlZEl0ZW1zJCksXG4gICAgICAgIHRha2VVbnRpbCh0aGlzLmRlc3Ryb3kkKVxuICAgICAgKVxuICAgICAgLnN1YnNjcmliZSgoW3VwZGF0ZSwgc2VsZWN0ZWRJdGVtc106IFtVcGRhdGVBY3Rpb24sIGFueVtdXSkgPT4ge1xuICAgICAgICBjb25zdCBpdGVtID0gdXBkYXRlLml0ZW07XG5cbiAgICAgICAgc3dpdGNoICh1cGRhdGUudHlwZSkge1xuICAgICAgICAgIGNhc2UgVXBkYXRlQWN0aW9ucy5BZGQ6XG4gICAgICAgICAgICBpZiAodGhpcy5fYWRkSXRlbShpdGVtLCBzZWxlY3RlZEl0ZW1zKSkge1xuICAgICAgICAgICAgICBpdGVtLl9zZWxlY3QoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgVXBkYXRlQWN0aW9ucy5SZW1vdmU6XG4gICAgICAgICAgICBpZiAodGhpcy5fcmVtb3ZlSXRlbShpdGVtLCBzZWxlY3RlZEl0ZW1zKSkge1xuICAgICAgICAgICAgICBpdGVtLl9kZXNlbGVjdCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgLy8gVXBkYXRlIHRoZSBjb250YWluZXIgYXMgd2VsbCBhcyBhbGwgc2VsZWN0YWJsZSBpdGVtcyBpZiB0aGUgbGlzdCBoYXMgY2hhbmdlZFxuICAgIHRoaXMuJHNlbGVjdGFibGVJdGVtcy5jaGFuZ2VzXG4gICAgICAucGlwZShcbiAgICAgICAgd2l0aExhdGVzdEZyb20odGhpcy5fc2VsZWN0ZWRJdGVtcyQpLFxuICAgICAgICBvYnNlcnZlT24oYXN5bmNTY2hlZHVsZXIpLFxuICAgICAgICB0YWtlVW50aWwodGhpcy5kZXN0cm95JClcbiAgICAgIClcbiAgICAgIC5zdWJzY3JpYmUoKFtpdGVtcywgc2VsZWN0ZWRJdGVtc106IFtRdWVyeUxpc3Q8U2VsZWN0SXRlbURpcmVjdGl2ZT4sIGFueVtdXSkgPT4ge1xuICAgICAgICBjb25zdCBuZXdMaXN0ID0gaXRlbXMudG9BcnJheSgpO1xuICAgICAgICBjb25zdCByZW1vdmVkSXRlbXMgPSBzZWxlY3RlZEl0ZW1zLmZpbHRlcihpdGVtID0+ICFuZXdMaXN0LmluY2x1ZGVzKGl0ZW0udmFsdWUpKTtcblxuICAgICAgICBpZiAocmVtb3ZlZEl0ZW1zLmxlbmd0aCkge1xuICAgICAgICAgIHJlbW92ZWRJdGVtcy5mb3JFYWNoKGl0ZW0gPT4gdGhpcy5fcmVtb3ZlSXRlbShpdGVtLCBzZWxlY3RlZEl0ZW1zKSk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnVwZGF0ZSgpO1xuICAgICAgfSk7XG4gIH1cblxuICBwcml2YXRlIF9vYnNlcnZlQm91bmRpbmdSZWN0Q2hhbmdlcygpIHtcbiAgICB0aGlzLm5nWm9uZS5ydW5PdXRzaWRlQW5ndWxhcigoKSA9PiB7XG4gICAgICBjb25zdCByZXNpemUkID0gZnJvbUV2ZW50KHdpbmRvdywgJ3Jlc2l6ZScpO1xuICAgICAgY29uc3Qgd2luZG93U2Nyb2xsJCA9IGZyb21FdmVudCh3aW5kb3csICdzY3JvbGwnKTtcbiAgICAgIGNvbnN0IGNvbnRhaW5lclNjcm9sbCQgPSBmcm9tRXZlbnQodGhpcy5ob3N0LCAnc2Nyb2xsJyk7XG5cbiAgICAgIG1lcmdlKHJlc2l6ZSQsIHdpbmRvd1Njcm9sbCQsIGNvbnRhaW5lclNjcm9sbCQpXG4gICAgICAgIC5waXBlKFxuICAgICAgICAgIHN0YXJ0V2l0aCgnSU5JVElBTF9VUERBVEUnKSxcbiAgICAgICAgICBhdWRpdFRpbWUoQVVESVRfVElNRSksXG4gICAgICAgICAgdGFrZVVudGlsKHRoaXMuZGVzdHJveSQpXG4gICAgICAgIClcbiAgICAgICAgLnN1YnNjcmliZSgoKSA9PiB7XG4gICAgICAgICAgdGhpcy51cGRhdGUoKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIF9pbml0U2VsZWN0aW9uT3V0cHV0cyhtb3VzZWRvd24kOiBPYnNlcnZhYmxlPE1vdXNlRXZlbnQ+LCBtb3VzZXVwJDogT2JzZXJ2YWJsZTxNb3VzZUV2ZW50Pikge1xuICAgIG1vdXNlZG93biRcbiAgICAgIC5waXBlKFxuICAgICAgICBmaWx0ZXIoZXZlbnQgPT4gdGhpcy5fY3Vyc29yV2l0aGluSG9zdChldmVudCkpLFxuICAgICAgICB0YXAoKCkgPT4gdGhpcy5zZWxlY3Rpb25TdGFydGVkLmVtaXQoKSksXG4gICAgICAgIGNvbmNhdE1hcFRvKG1vdXNldXAkLnBpcGUoZmlyc3QoKSkpLFxuICAgICAgICB3aXRoTGF0ZXN0RnJvbSh0aGlzLl9zZWxlY3RlZEl0ZW1zJCksXG4gICAgICAgIG1hcCgoWywgaXRlbXNdKSA9PiBpdGVtcyksXG4gICAgICAgIHRha2VVbnRpbCh0aGlzLmRlc3Ryb3kkKVxuICAgICAgKVxuICAgICAgLnN1YnNjcmliZShpdGVtcyA9PiB7XG4gICAgICAgIHRoaXMuc2VsZWN0aW9uRW5kZWQuZW1pdChpdGVtcyk7XG4gICAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgX2NhbGN1bGF0ZUJvdW5kaW5nQ2xpZW50UmVjdCgpIHtcbiAgICB0aGlzLmhvc3QuYm91bmRpbmdDbGllbnRSZWN0ID0gY2FsY3VsYXRlQm91bmRpbmdDbGllbnRSZWN0KHRoaXMuaG9zdCk7XG4gIH1cblxuICBwcml2YXRlIF9jdXJzb3JXaXRoaW5Ib3N0KGV2ZW50OiBNb3VzZUV2ZW50KSB7XG4gICAgcmV0dXJuIGN1cnNvcldpdGhpbkVsZW1lbnQoZXZlbnQsIHRoaXMuaG9zdCk7XG4gIH1cblxuICBwcml2YXRlIF9vbk1vdXNlVXAoKSB7XG4gICAgdGhpcy5fZmx1c2hJdGVtcygpO1xuICAgIHRoaXMucmVuZGVyZXIucmVtb3ZlQ2xhc3MoZG9jdW1lbnQuYm9keSwgTk9fU0VMRUNUX0NMQVNTKTtcbiAgfVxuXG4gIHByaXZhdGUgX29uTW91c2VEb3duKGV2ZW50OiBNb3VzZUV2ZW50KSB7XG4gICAgaWYgKHRoaXMuc2hvcnRjdXRzLmRpc2FibGVTZWxlY3Rpb24oZXZlbnQpIHx8IHRoaXMuZGlzYWJsZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjbGVhclNlbGVjdGlvbih3aW5kb3cpO1xuXG4gICAgaWYgKCF0aGlzLmRpc2FibGVEcmFnKSB7XG4gICAgICB0aGlzLnJlbmRlcmVyLmFkZENsYXNzKGRvY3VtZW50LmJvZHksIE5PX1NFTEVDVF9DTEFTUyk7XG4gICAgfVxuXG4gICAgY29uc3QgbW91c2VQb2ludCA9IGdldE1vdXNlUG9zaXRpb24oZXZlbnQpO1xuXG4gICAgdGhpcy4kc2VsZWN0YWJsZUl0ZW1zLmZvckVhY2goKGl0ZW0sIGluZGV4KSA9PiB7XG4gICAgICBjb25zdCBpdGVtUmVjdCA9IGl0ZW0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICBjb25zdCB3aXRoaW5Cb3VuZGluZ0JveCA9IGluQm91bmRpbmdCb3gobW91c2VQb2ludCwgaXRlbVJlY3QpO1xuXG4gICAgICBpZiAodGhpcy5zaG9ydGN1dHMuZXh0ZW5kZWRTZWxlY3Rpb25TaG9ydGN1dChldmVudCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBzaG91bGRBZGQgPVxuICAgICAgICAod2l0aGluQm91bmRpbmdCb3ggJiZcbiAgICAgICAgICAhdGhpcy5zaG9ydGN1dHMudG9nZ2xlU2luZ2xlSXRlbShldmVudCkgJiZcbiAgICAgICAgICAhdGhpcy5zZWxlY3RNb2RlICYmXG4gICAgICAgICAgIXRoaXMuc2VsZWN0V2l0aFNob3J0Y3V0KSB8fFxuICAgICAgICAod2l0aGluQm91bmRpbmdCb3ggJiYgdGhpcy5zaG9ydGN1dHMudG9nZ2xlU2luZ2xlSXRlbShldmVudCkgJiYgIWl0ZW0uc2VsZWN0ZWQpIHx8XG4gICAgICAgICghd2l0aGluQm91bmRpbmdCb3ggJiYgdGhpcy5zaG9ydGN1dHMudG9nZ2xlU2luZ2xlSXRlbShldmVudCkgJiYgaXRlbS5zZWxlY3RlZCkgfHxcbiAgICAgICAgKHdpdGhpbkJvdW5kaW5nQm94ICYmICFpdGVtLnNlbGVjdGVkICYmIHRoaXMuc2VsZWN0TW9kZSkgfHxcbiAgICAgICAgKCF3aXRoaW5Cb3VuZGluZ0JveCAmJiBpdGVtLnNlbGVjdGVkICYmIHRoaXMuc2VsZWN0TW9kZSk7XG5cbiAgICAgIGNvbnN0IHNob3VsZFJlbW92ZSA9XG4gICAgICAgICghd2l0aGluQm91bmRpbmdCb3ggJiZcbiAgICAgICAgICAhdGhpcy5zaG9ydGN1dHMudG9nZ2xlU2luZ2xlSXRlbShldmVudCkgJiZcbiAgICAgICAgICAhdGhpcy5zZWxlY3RNb2RlICYmXG4gICAgICAgICAgIXRoaXMuc2VsZWN0V2l0aFNob3J0Y3V0KSB8fFxuICAgICAgICAoIXdpdGhpbkJvdW5kaW5nQm94ICYmIHRoaXMuc2hvcnRjdXRzLnRvZ2dsZVNpbmdsZUl0ZW0oZXZlbnQpICYmICFpdGVtLnNlbGVjdGVkKSB8fFxuICAgICAgICAod2l0aGluQm91bmRpbmdCb3ggJiYgdGhpcy5zaG9ydGN1dHMudG9nZ2xlU2luZ2xlSXRlbShldmVudCkgJiYgaXRlbS5zZWxlY3RlZCkgfHxcbiAgICAgICAgKCF3aXRoaW5Cb3VuZGluZ0JveCAmJiAhaXRlbS5zZWxlY3RlZCAmJiB0aGlzLnNlbGVjdE1vZGUpIHx8XG4gICAgICAgICh3aXRoaW5Cb3VuZGluZ0JveCAmJiBpdGVtLnNlbGVjdGVkICYmIHRoaXMuc2VsZWN0TW9kZSk7XG5cbiAgICAgIGlmIChzaG91bGRBZGQpIHtcbiAgICAgICAgdGhpcy5fc2VsZWN0SXRlbShpdGVtKTtcbiAgICAgIH0gZWxzZSBpZiAoc2hvdWxkUmVtb3ZlKSB7XG4gICAgICAgIHRoaXMuX2Rlc2VsZWN0SXRlbShpdGVtKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgX3NlbGVjdEl0ZW1zKGV2ZW50OiBFdmVudCkge1xuICAgIGNvbnN0IHNlbGVjdGlvbkJveCA9IGNhbGN1bGF0ZUJvdW5kaW5nQ2xpZW50UmVjdCh0aGlzLiRzZWxlY3RCb3gubmF0aXZlRWxlbWVudCk7XG5cbiAgICB0aGlzLiRzZWxlY3RhYmxlSXRlbXMuZm9yRWFjaChpdGVtID0+IHtcbiAgICAgIGlmICh0aGlzLl9pc0V4dGVuZGVkU2VsZWN0aW9uKGV2ZW50KSkge1xuICAgICAgICB0aGlzLl9leHRlbmRlZFNlbGVjdGlvbk1vZGUoc2VsZWN0aW9uQm94LCBpdGVtLCBldmVudCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl9ub3JtYWxTZWxlY3Rpb25Nb2RlKHNlbGVjdGlvbkJveCwgaXRlbSwgZXZlbnQpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBfaXNFeHRlbmRlZFNlbGVjdGlvbihldmVudDogRXZlbnQpIHtcbiAgICByZXR1cm4gdGhpcy5zaG9ydGN1dHMuZXh0ZW5kZWRTZWxlY3Rpb25TaG9ydGN1dChldmVudCkgJiYgdGhpcy5zZWxlY3RPbkRyYWc7XG4gIH1cblxuICBwcml2YXRlIF9ub3JtYWxTZWxlY3Rpb25Nb2RlKHNlbGVjdEJveCwgaXRlbTogU2VsZWN0SXRlbURpcmVjdGl2ZSwgZXZlbnQ6IEV2ZW50KSB7XG4gICAgY29uc3QgaW5TZWxlY3Rpb24gPSBib3hJbnRlcnNlY3RzKHNlbGVjdEJveCwgaXRlbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSk7XG5cbiAgICBjb25zdCBzaG91bGRBZGQgPSBpblNlbGVjdGlvbiAmJiAhaXRlbS5zZWxlY3RlZCAmJiAhdGhpcy5zaG9ydGN1dHMucmVtb3ZlRnJvbVNlbGVjdGlvbihldmVudCk7XG5cbiAgICBjb25zdCBzaG91bGRSZW1vdmUgPVxuICAgICAgKCFpblNlbGVjdGlvbiAmJiBpdGVtLnNlbGVjdGVkICYmICF0aGlzLnNob3J0Y3V0cy5hZGRUb1NlbGVjdGlvbihldmVudCkpIHx8XG4gICAgICAoaW5TZWxlY3Rpb24gJiYgaXRlbS5zZWxlY3RlZCAmJiB0aGlzLnNob3J0Y3V0cy5yZW1vdmVGcm9tU2VsZWN0aW9uKGV2ZW50KSk7XG5cbiAgICBpZiAoc2hvdWxkQWRkKSB7XG4gICAgICB0aGlzLl9zZWxlY3RJdGVtKGl0ZW0pO1xuICAgIH0gZWxzZSBpZiAoc2hvdWxkUmVtb3ZlKSB7XG4gICAgICB0aGlzLl9kZXNlbGVjdEl0ZW0oaXRlbSk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBfZXh0ZW5kZWRTZWxlY3Rpb25Nb2RlKHNlbGVjdEJveCwgaXRlbTogU2VsZWN0SXRlbURpcmVjdGl2ZSwgZXZlbnQ6IEV2ZW50KSB7XG4gICAgY29uc3QgaW5TZWxlY3Rpb24gPSBib3hJbnRlcnNlY3RzKHNlbGVjdEJveCwgaXRlbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSk7XG5cbiAgICBjb25zdCBzaG91ZGxBZGQgPVxuICAgICAgKGluU2VsZWN0aW9uICYmICFpdGVtLnNlbGVjdGVkICYmICF0aGlzLnNob3J0Y3V0cy5yZW1vdmVGcm9tU2VsZWN0aW9uKGV2ZW50KSAmJiAhdGhpcy5fdG1wSXRlbXMuaGFzKGl0ZW0pKSB8fFxuICAgICAgKGluU2VsZWN0aW9uICYmIGl0ZW0uc2VsZWN0ZWQgJiYgdGhpcy5zaG9ydGN1dHMucmVtb3ZlRnJvbVNlbGVjdGlvbihldmVudCkgJiYgIXRoaXMuX3RtcEl0ZW1zLmhhcyhpdGVtKSk7XG5cbiAgICBjb25zdCBzaG91bGRSZW1vdmUgPVxuICAgICAgKCFpblNlbGVjdGlvbiAmJiBpdGVtLnNlbGVjdGVkICYmIHRoaXMuc2hvcnRjdXRzLmFkZFRvU2VsZWN0aW9uKGV2ZW50KSAmJiB0aGlzLl90bXBJdGVtcy5oYXMoaXRlbSkpIHx8XG4gICAgICAoIWluU2VsZWN0aW9uICYmICFpdGVtLnNlbGVjdGVkICYmIHRoaXMuc2hvcnRjdXRzLnJlbW92ZUZyb21TZWxlY3Rpb24oZXZlbnQpICYmIHRoaXMuX3RtcEl0ZW1zLmhhcyhpdGVtKSk7XG5cbiAgICBpZiAoc2hvdWRsQWRkKSB7XG4gICAgICBpdGVtLnNlbGVjdGVkID8gaXRlbS5fZGVzZWxlY3QoKSA6IGl0ZW0uX3NlbGVjdCgpO1xuXG4gICAgICBjb25zdCBhY3Rpb24gPSB0aGlzLnNob3J0Y3V0cy5yZW1vdmVGcm9tU2VsZWN0aW9uKGV2ZW50KVxuICAgICAgICA/IEFjdGlvbi5EZWxldGVcbiAgICAgICAgOiB0aGlzLnNob3J0Y3V0cy5hZGRUb1NlbGVjdGlvbihldmVudClcbiAgICAgICAgPyBBY3Rpb24uQWRkXG4gICAgICAgIDogQWN0aW9uLk5vbmU7XG5cbiAgICAgIHRoaXMuX3RtcEl0ZW1zLnNldChpdGVtLCBhY3Rpb24pO1xuICAgIH0gZWxzZSBpZiAoc2hvdWxkUmVtb3ZlKSB7XG4gICAgICB0aGlzLnNob3J0Y3V0cy5yZW1vdmVGcm9tU2VsZWN0aW9uKGV2ZW50KSA/IGl0ZW0uX3NlbGVjdCgpIDogaXRlbS5fZGVzZWxlY3QoKTtcbiAgICAgIHRoaXMuX3RtcEl0ZW1zLmRlbGV0ZShpdGVtKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIF9mbHVzaEl0ZW1zKCkge1xuICAgIHRoaXMuX3RtcEl0ZW1zLmZvckVhY2goKGFjdGlvbiwgaXRlbSkgPT4ge1xuICAgICAgaWYgKGFjdGlvbiA9PT0gQWN0aW9uLkFkZCkge1xuICAgICAgICB0aGlzLl9zZWxlY3RJdGVtKGl0ZW0pO1xuICAgICAgfVxuXG4gICAgICBpZiAoYWN0aW9uID09PSBBY3Rpb24uRGVsZXRlKSB7XG4gICAgICAgIHRoaXMuX2Rlc2VsZWN0SXRlbShpdGVtKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHRoaXMuX3RtcEl0ZW1zLmNsZWFyKCk7XG4gIH1cblxuICBwcml2YXRlIF9hZGRJdGVtKGl0ZW06IFNlbGVjdEl0ZW1EaXJlY3RpdmUsIHNlbGVjdGVkSXRlbXM6IEFycmF5PGFueT4pIHtcbiAgICBsZXQgc3VjY2VzcyA9IGZhbHNlO1xuXG4gICAgaWYgKCF0aGlzLl9oYXNJdGVtKGl0ZW0sIHNlbGVjdGVkSXRlbXMpKSB7XG4gICAgICBzdWNjZXNzID0gdHJ1ZTtcbiAgICAgIHNlbGVjdGVkSXRlbXMucHVzaChpdGVtLnZhbHVlKTtcbiAgICAgIHRoaXMuX3NlbGVjdGVkSXRlbXMkLm5leHQoc2VsZWN0ZWRJdGVtcyk7XG4gICAgICB0aGlzLml0ZW1TZWxlY3RlZC5lbWl0KGl0ZW0udmFsdWUpO1xuICAgIH1cblxuICAgIHJldHVybiBzdWNjZXNzO1xuICB9XG5cbiAgcHJpdmF0ZSBfcmVtb3ZlSXRlbShpdGVtOiBTZWxlY3RJdGVtRGlyZWN0aXZlLCBzZWxlY3RlZEl0ZW1zOiBBcnJheTxhbnk+KSB7XG4gICAgbGV0IHN1Y2Nlc3MgPSBmYWxzZTtcbiAgICBjb25zdCB2YWx1ZSA9IGl0ZW0gaW5zdGFuY2VvZiBTZWxlY3RJdGVtRGlyZWN0aXZlID8gaXRlbS52YWx1ZSA6IGl0ZW07XG4gICAgY29uc3QgaW5kZXggPSBzZWxlY3RlZEl0ZW1zLmluZGV4T2YodmFsdWUpO1xuXG4gICAgaWYgKGluZGV4ID4gLTEpIHtcbiAgICAgIHN1Y2Nlc3MgPSB0cnVlO1xuICAgICAgc2VsZWN0ZWRJdGVtcy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgdGhpcy5fc2VsZWN0ZWRJdGVtcyQubmV4dChzZWxlY3RlZEl0ZW1zKTtcbiAgICAgIHRoaXMuaXRlbURlc2VsZWN0ZWQuZW1pdChpdGVtLnZhbHVlKTtcbiAgICB9XG5cbiAgICByZXR1cm4gc3VjY2VzcztcbiAgfVxuXG4gIHByaXZhdGUgX3RvZ2dsZUl0ZW0oaXRlbTogU2VsZWN0SXRlbURpcmVjdGl2ZSkge1xuICAgIGlmIChpdGVtLnNlbGVjdGVkKSB7XG4gICAgICB0aGlzLl9kZXNlbGVjdEl0ZW0oaXRlbSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX3NlbGVjdEl0ZW0oaXRlbSk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBfc2VsZWN0SXRlbShpdGVtOiBTZWxlY3RJdGVtRGlyZWN0aXZlKSB7XG4gICAgdGhpcy51cGRhdGVJdGVtcyQubmV4dCh7IHR5cGU6IFVwZGF0ZUFjdGlvbnMuQWRkLCBpdGVtIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBfZGVzZWxlY3RJdGVtKGl0ZW06IFNlbGVjdEl0ZW1EaXJlY3RpdmUpIHtcbiAgICB0aGlzLnVwZGF0ZUl0ZW1zJC5uZXh0KHsgdHlwZTogVXBkYXRlQWN0aW9ucy5SZW1vdmUsIGl0ZW0gfSk7XG4gIH1cblxuICBwcml2YXRlIF9oYXNJdGVtKGl0ZW06IFNlbGVjdEl0ZW1EaXJlY3RpdmUsIHNlbGVjdGVkSXRlbXM6IEFycmF5PGFueT4pIHtcbiAgICByZXR1cm4gc2VsZWN0ZWRJdGVtcy5pbmNsdWRlcyhpdGVtLnZhbHVlKTtcbiAgfVxufVxuIiwiaW1wb3J0IHsgRHJhZ1RvU2VsZWN0Q29uZmlnIH0gZnJvbSAnLi9tb2RlbHMnO1xuXG5leHBvcnQgY29uc3QgREVGQVVMVF9DT05GSUc6IERyYWdUb1NlbGVjdENvbmZpZyA9IHtcbiAgc2VsZWN0ZWRDbGFzczogJ3NlbGVjdGVkJyxcbiAgc2hvcnRjdXRzOiB7XG4gICAgZGlzYWJsZVNlbGVjdGlvbjogJ2FsdCcsXG4gICAgdG9nZ2xlU2luZ2xlSXRlbTogJ21ldGEnLFxuICAgIGFkZFRvU2VsZWN0aW9uOiAnc2hpZnQnLFxuICAgIHJlbW92ZUZyb21TZWxlY3Rpb246ICdzaGlmdCttZXRhJ1xuICB9XG59O1xuIiwiaW1wb3J0IHsgTmdNb2R1bGUsIE1vZHVsZVdpdGhQcm92aWRlcnMgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IENvbW1vbk1vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbic7XG5cbmltcG9ydCB7IFNlbGVjdENvbnRhaW5lckNvbXBvbmVudCB9IGZyb20gJy4vc2VsZWN0LWNvbnRhaW5lci5jb21wb25lbnQnO1xuaW1wb3J0IHsgU2VsZWN0SXRlbURpcmVjdGl2ZSB9IGZyb20gJy4vc2VsZWN0LWl0ZW0uZGlyZWN0aXZlJztcbmltcG9ydCB7IFNob3J0Y3V0U2VydmljZSB9IGZyb20gJy4vc2hvcnRjdXQuc2VydmljZSc7XG5pbXBvcnQgeyBEcmFnVG9TZWxlY3RDb25maWcgfSBmcm9tICcuL21vZGVscyc7XG5pbXBvcnQgeyBDT05GSUcsIFVTRVJfQ09ORklHIH0gZnJvbSAnLi90b2tlbnMnO1xuaW1wb3J0IHsgREVGQVVMVF9DT05GSUcgfSBmcm9tICcuL2NvbmZpZyc7XG5pbXBvcnQgeyBtZXJnZURlZXAgfSBmcm9tICcuL3V0aWxzJztcblxuY29uc3QgQ09NUE9ORU5UUyA9IFtTZWxlY3RDb250YWluZXJDb21wb25lbnQsIFNlbGVjdEl0ZW1EaXJlY3RpdmVdO1xuXG5leHBvcnQgZnVuY3Rpb24gQ09ORklHX0ZBQ1RPUlkoY29uZmlnOiBQYXJ0aWFsPERyYWdUb1NlbGVjdENvbmZpZz4pIHtcbiAgcmV0dXJuIG1lcmdlRGVlcChERUZBVUxUX0NPTkZJRywgY29uZmlnKTtcbn1cblxuQE5nTW9kdWxlKHtcbiAgaW1wb3J0czogW0NvbW1vbk1vZHVsZV0sXG4gIGRlY2xhcmF0aW9uczogWy4uLkNPTVBPTkVOVFNdLFxuICBleHBvcnRzOiBbLi4uQ09NUE9ORU5UU11cbn0pXG5leHBvcnQgY2xhc3MgRHJhZ1RvU2VsZWN0TW9kdWxlIHtcbiAgc3RhdGljIGZvclJvb3QoY29uZmlnOiBQYXJ0aWFsPERyYWdUb1NlbGVjdENvbmZpZz4gPSB7fSk6IE1vZHVsZVdpdGhQcm92aWRlcnMge1xuICAgIHJldHVybiB7XG4gICAgICBuZ01vZHVsZTogRHJhZ1RvU2VsZWN0TW9kdWxlLFxuICAgICAgcHJvdmlkZXJzOiBbXG4gICAgICAgIFNob3J0Y3V0U2VydmljZSxcbiAgICAgICAgeyBwcm92aWRlOiBVU0VSX0NPTkZJRywgdXNlVmFsdWU6IGNvbmZpZyB9LFxuICAgICAgICB7XG4gICAgICAgICAgcHJvdmlkZTogQ09ORklHLFxuICAgICAgICAgIHVzZUZhY3Rvcnk6IENPTkZJR19GQUNUT1JZLFxuICAgICAgICAgIGRlcHM6IFtVU0VSX0NPTkZJR11cbiAgICAgICAgfVxuICAgICAgXVxuICAgIH07XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJJbmplY3Rpb25Ub2tlbiIsImlzUGxhdGZvcm1Ccm93c2VyIiwiRGlyZWN0aXZlIiwiSW5qZWN0IiwiUExBVEZPUk1fSUQiLCJFbGVtZW50UmVmIiwiUmVuZGVyZXIyIiwiSW5wdXQiLCJ0c2xpYl8xLl9fdmFsdWVzIiwiSW5qZWN0YWJsZSIsIm1hcCIsIndpdGhMYXRlc3RGcm9tIiwiZmlsdGVyIiwiZGlzdGluY3RVbnRpbENoYW5nZWQiLCJFdmVudEVtaXR0ZXIiLCJCZWhhdmlvclN1YmplY3QiLCJTdWJqZWN0IiwiZnJvbUV2ZW50Iiwic2hhcmUiLCJ0YXAiLCJzd2l0Y2hNYXAiLCJ0YWtlVW50aWwiLCJtYXBUbyIsIm1lcmdlIiwiY29tYmluZUxhdGVzdCIsImF1ZGl0VGltZSIsImZpcnN0IiwiZnJvbSIsIm9ic2VydmVPbiIsImFzeW5jU2NoZWR1bGVyIiwic3RhcnRXaXRoIiwiY29uY2F0TWFwVG8iLCJDb21wb25lbnQiLCJOZ1pvbmUiLCJWaWV3Q2hpbGQiLCJDb250ZW50Q2hpbGRyZW4iLCJIb3N0QmluZGluZyIsIk91dHB1dCIsIk5nTW9kdWxlIiwiQ29tbW9uTW9kdWxlIl0sIm1hcHBpbmdzIjoiOzs7Ozs7SUFBQTs7Ozs7Ozs7Ozs7Ozs7QUFjQSxhQTRGZ0IsUUFBUSxDQUFDLENBQUM7UUFDdEIsSUFBSSxDQUFDLEdBQUcsT0FBTyxNQUFNLEtBQUssVUFBVSxJQUFJLENBQUMsQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUNsRSxJQUFJLENBQUM7WUFBRSxPQUFPLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDeEIsT0FBTztZQUNILElBQUksRUFBRTtnQkFDRixJQUFJLENB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